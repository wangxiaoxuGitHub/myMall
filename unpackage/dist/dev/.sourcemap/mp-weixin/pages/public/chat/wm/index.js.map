{"version":3,"sources":["webpack:///E:/example/myMall/pages/public/chat/wm/index.vue?fe21","webpack:///E:/example/myMall/pages/public/chat/wm/index.vue?241b","webpack:///E:/example/myMall/pages/public/chat/wm/index.vue?1a90","webpack:///E:/example/myMall/pages/public/chat/wm/index.vue?294e","uni-app:///pages/public/chat/wm/index.vue","webpack:///E:/example/myMall/pages/public/chat/wm/index.vue?ed92","webpack:///E:/example/myMall/pages/public/chat/wm/index.vue?cad4"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;AACc;;;AAGlE;AAC2L;AAC3L,gBAAgB,kMAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,sNAEN;AACP,KAAK;AACL;AACA,aAAa,mQAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1DA;AAAA;AAAA;AAAA;AAA6sB,CAAgB,wtBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqOjuB;;;;AAIA;AACA,kG,2uDALA;AACA,wC,CAAA;AACA,kB,CAAA;AACA,6B,eAIA,EACA,cADA;AAEA,MAFA,kBAEA;AACA;AACA,qBADA;AAEA;AACA,gBADA;AAEA,mBAFA;AAGA,mBAHA,EAFA;;AAOA,0BAPA;AAQA,2BARA;AASA,qBATA;AAUA,6BAVA;AAWA,wBAXA;AAYA,0BAZA;AAaA,gBAbA;AAcA,mBAdA;AAeA,qBAfA;AAgBA,uBAhBA;AAiBA;AACA,wBADA;AAEA,mBAFA,EAEA;AACA,oBAHA,EAGA;AACA,wBAJA,EAIA;AACA,4BALA;AAMA,yBANA;AAOA,6BAPA;AAQA,4BARA,CAQA;AARA,OAjBA;AA2BA,aA3BA,EA2BA;AACA,kBA5BA,EA4BA;AACA,qBA7BA,EA6BA;AACA,6BA9BA;AA+BA,qBA/BA;AAgCA,uBAhCA;AAiCA,yBAjCA;AAkCA,wBAlCA;AAmCA;AACA,qBADA;AAEA,qBAFA,EAnCA;;AAuCA,yBAvCA;AAwCA,oBAxCA;;AA0CA,GA7CA;AA8CA;AACA,qCADA,CA9CA;;AAiDA;AACA,iBADA,EAjDA;;AAoDA,SApDA,qBAoDA;AACA;AACA;AACA,GAvDA;AAwDA,QAxDA,oBAwDA;AACA;AACA;AACA;;AAEA;;AAEA,GA/DA;AAgEA,QAhEA,oBAgEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,GAxEA;AAyEA,eAzEA,2BAyEA;AACA;AACA;AACA;AACA;AACA;AACA,GA/EA;AAgFA;AACA;AACA,QAFA,gBAEA,IAFA,EAEA,MAFA,EAEA;AACA;AACA,kBADA;AAEA,qBAFA;;AAIA,KAPA;AAQA;AACA,YATA,oBASA,GATA,EASA;AACA;AACA,KAXA;AAYA;AACA,YAbA,sBAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KArBA;AAsBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OALA,CAKA;AACA;AACA;AACA;AACA,yCADA;AAEA;AACA,4CADA;AAEA,kDAFA;AAGA,6BAHA,EAFA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA,eAFA,CAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,aAFA,CAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,uHADA;AAEA,0DAFA;;AAIA;AACA;AACA;AACA;;AAEA;AACA;AACA,WAjDA,MAiDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAtEA;AAuEA;AACA;AACA,yBADA;AAEA,qCAFA;AAGA,6BAHA;;AAKA;AACA,SA9EA;;AAgFA,KAnHA;AAoHA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA;AACA,KA7HA;AA8HA;AACA;AACA;AACA,KAjIA;AAkIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA3IA;AA4IA;AACA;AACA;AACA;AACA;;AAEA;AACA,uBADA;;;AAIA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA,yBADA;AAEA;AACA,4CADA,EAFA;;AAKA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA,2BADA;AAEA,mCAFA;AAGA,+BAHA;;AAKA;AACA,SAfA;AAgBA;AACA;AACA,yBADA;AAEA,kCAFA;AAGA,6BAHA;;AAKA,SAtBA;AAuBA;AACA;AACA,SAzBA;;AA2BA,KAzLA;AA0LA;AACA;AACA;AACA,KA7LA;AA8LA;AACA,sCADA,CACA;AACA,KAhMA;AAiMA;AACA,sCADA,CACA;AACA;AACA,oBADA;AAEA,mBAFA;;AAIA,KAvMA;AAwMA,eAxMA,yBAwMA;AACA,gEADA,SACA,SADA;AAEA;;;AAGA,sBAHA,GAGA,MAHA;AAIA,kDAJA,CAIA;AACA;AACA;AACA;;AAEA;AACA,wCADA;;;AAIA;AACA,qDADA;;;;AAKA,kDALA;AAMA,oCANA;AAOA;AACA,4DADA,EAPA;;AAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2BAJA,MAIA;AACA;AACA,2CADA;AAEA,8CAFA;AAGA,+CAHA;;AAKA;AACA,yBAzBA;AA0BA;AACA;AACA,yBA5BA;;;;AAgCA;AACA;AACA,mDADA;;AAGA,uBAJA;;AAMA,qBA9CA;;AAgDA,iBAvDA;AAwDA,KAhQA;AAiQA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,iCADA;AAEA;AACA,4CADA,EAFA;;AAKA,2CALA;;;AAQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,yDAfA,CAeA;AACA,OAhBA;;AAkBA;AACA;AACA;AACA;AACA,OAHA;;AAKA;AACA;AACA;AACA;AACA;AACA,OAJA;;AAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,kEADA,CACA;AACA;AACA,OAlBA;AAmBA,KAtUA;AAuUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA;;AAEA;AACA,gEANA,CAMA;AACA;AACA,KAtVA;AAuVA;AACA;AACA;AACA;AACA;AACA,sBADA;AAEA,mBAFA;;AAIA;;AAEA;AACA;AACA,uCADA;;AAGA,OAJA,MAIA;AACA;AACA;AACA;AACA,KAzWA;AA0WA;AACA;AACA;AACA;AACA,0BADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA,gCADA;AAEA,sBAFA;;AAIA;AACA;;AAEA;AACA;AACA,2BADA;AAEA,sBAFA;;AAIA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,+BALA,CAKA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,oBADA;AAEA,wBAFA;AAGA;AACA,4DADA;AAEA,oCAFA;AAGA,oCAHA;AAIA,6BAJA,EAHA;;;;AAWA;;AAEA;AACA;;AAEA;AACA,sBADA;AAEA,oBAFA;AAGA,8DAHA;AAIA,kCAJA;;;AAOA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,wBADA;AAEA,2CAFA;;AAIA;;AAEA;AACA;AACA;AACA;AACA,KAzbA;AA0bA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAlcA;AAmcA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KA1cA;AA2cA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KApdA;AAqdA;AACA;AACA;AACA,6BADA;AAEA,sBAFA;;AAIA;AACA;;AAEA;AACA,oBADA;AAEA,yBAFA;AAGA,+BAHA;;AAKA;AACA,KApeA;AAqeA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,sBADA;AAEA,6BAFA;AAGA;AACA,oCADA,EAHA;;;AAOA;AACA,OAdA,MAcA;AACA;AACA;AACA;AACA;AACA;AACA,2CADA;AAEA,4BAFA;;AAIA,aALA;AAMA;;AAEA;AACA;AACA;AACA;AACA,SAdA,MAcA;AACA;AACA;AACA;AACA;AACA;AACA,WALA,MAKA;AACA;AACA,4CADA;AAEA,0BAFA;;AAIA;AACA;AACA,OA7BA,MA6BA;AACA;AACA,wBADA;AAEA,sBAFA;;AAIA,OALA,MAKA;AACA;AACA,wBADA;AAEA,sBAFA;;AAIA;AACA,kBADA;AAEA,qBAFA;AAGA,qBAHA;;AAKA,OAVA,MAUA;AACA;AACA;AACA,0BADA;AAEA,wBAFA;;AAIA;;AAEA;AACA,sBADA;AAEA,oBAFA;;AAIA;;AAEA;AACA;AACA,SAFA;AAGA,OAjBA,MAiBA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA,0BADA;AAEA,iCAFA;;AAIA;AACA;AACA;AACA,OAdA,MAcA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA,OARA,MAQA;AACA;AACA;AACA,OAHA,MAGA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA,4BADA;AAEA,mDAFA;;AAIA;;AAEA;AACA,wBADA;AAEA,4BAFA;AAGA;AACA,2CADA,EAHA;;;;AAQA;;AAEA;AACA;AACA,OA1BA,MA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA1nBA;AA2nBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gBAnBA;;;AAsBA;AACA,KAnpBA;AAopBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBA9BA;;AAgCA,KAxrBA;AAyrBA;AACA;AACA;AACA;AACA;AACA,SAFA,EAEA,IAFA;AAGA,OALA,MAKA;AACA;AACA;AACA,KAlsBA;AAmsBA;AACA;AACA;AACA;AACA,OAFA,EAEA,OAFA;AAGA;AACA,KAzsBA;AA0sBA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBADA;AAEA,uBAFA;AAGA;AACA,oCADA;AAEA,mCAFA,EAHA;;;;AASA;AACA,KA1tBA;AA2tBA;AACA;AACA,KA7tBA;AA8tBA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAxuBA;AAyuBA;AACA;AACA;AACA;AACA;AACA,KA9uBA;AA+uBA;AACA;AACA;AACA;AACA,KAnvBA;AAovBA;AACA;AACA;AACA;AACA,yBADA;AAEA,QAFA,CAEA,IAFA;AAGA,YAHA,CAGA,QAHA;AAIA;AACA,YADA;AAEA;AACA,kBADA,EAFA;;AAKA;AACA;AACA;AACA;AACA,OATA;;AAWA,UAXA;AAYA,KAvwBA;AAwwBA;AACA;AACA;AACA;AACA;AACA;AACA,KA9wBA;AA+wBA;AACA;AACA;AACA,KAlxBA;AAmxBA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAnyBA,EAhFA,E;;;;;;;;;;;;;AC5OA;AAAA;AAAA;AAAA;AAAuyC,CAAgB,svCAAG,EAAC,C;;;;;;;;;;;ACA3zC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/public/chat/wm/index.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=c21221fa&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/public/chat/wm/index.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=template&id=c21221fa&\"","var components\ntry {\n  components = {\n    shoproNavbar: function() {\n      return import(\n        /* webpackChunkName: \"components/shopro-navbar/shopro-navbar\" */ \"@/components/shopro-navbar/shopro-navbar.vue\"\n      )\n    },\n    uParse: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-parse/u-parse\" */ \"@/uview-ui/components/u-parse/u-parse.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 =\n    _vm.selectModel && _vm.selectModelData.length > 0\n      ? _vm.__map(_vm.selectModelData, function(item, index) {\n          var $orig = _vm.__get_orig(item)\n\n          var g0 = index.toString()\n          return {\n            $orig: $orig,\n            g0: g0\n          }\n        })\n      : null\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=script&lang=js&\"","<!-- FastAdmin在线客服插件不是开源产品，所有文字、图片、样式、风格等版权归在线客服作者所有，如有复制、仿冒、抄袭、盗用，FastAdmin和在线客服作者将追究法律责任 -->\r\n<template>\r\n\t<view>\r\n\t\t<shopro-navbar backIconColor=\"#333\":backText=\"headTitle\"></shopro-navbar>\r\n\t\t<view class=\"kefu_container\">\r\n\t\t\t<view v-if=\"errorTips\" class=\"error_tips\">{{ errorTips }}</view>\r\n\t\t\t<view v-if=\"config.announcement && errorTips == ''\" class=\"notice\">\r\n\t\t\t\t<text>{{ config.announcement }}</text>\r\n\t\t\t\t<text class=\"u-iconfont uicon-close-circle-fill close_notice\" style=\"color: #e0e0e0;font-size: 36rpx;\"  @tap=\"close_notice\"></text>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!--留言板 -->\r\n\t\t\t<view v-if=\"showLeaveMessage\" class=\"leave_message\">\r\n\t\t\t\t<form>\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"c-name\" class=\"control-label\">\r\n\t\t\t\t\t\t\t<view class=\"label-title\">姓名</view>\r\n\t\t\t\t\t\t\t<input \r\n\t\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t\t@input=\"leave_message\"\r\n\t\t\t\t\t\t\t\tname=\"name\"\r\n\t\t\t\t\t\t\t\tv-model=\"leaveMessage.name\"\r\n\t\t\t\t\t\t\t\tclass=\"form-control\"\r\n\t\t\t\t\t\t\t\tid=\"c-name\"\r\n\t\t\t\t\t\t\t\tplaceholder-style=\"color:#B1B3C7\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"请输入您的姓名\"\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"c-contact\" class=\"control-label\"><view class=\"label-title\">联系方式</view></label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\t@input=\"leave_message\"\r\n\t\t\t\t\t\t\tname=\"contact\"\r\n\t\t\t\t\t\t\tv-model=\"leaveMessage.contact\"\r\n\t\t\t\t\t\t\tclass=\"form-control\"\r\n\t\t\t\t\t\t\tid=\"c-contact\"\r\n\t\t\t\t\t\t\tplaceholder-style=\"color:#B1B3C7\"\r\n\t\t\t\t\t\t\tplaceholder=\"请输入手机/QQ/微信号\"\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"form-group\">\r\n\t\t\t\t\t\t<label for=\"c-message\" class=\"control-label\"><view class=\"label-title\">留言内容</view></label>\r\n\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\trows=\"5\"\r\n\t\t\t\t\t\t\t@input=\"leave_message\"\r\n\t\t\t\t\t\t\tname=\"message\"\r\n\t\t\t\t\t\t\tv-model=\"leaveMessage.message\"\r\n\t\t\t\t\t\t\tclass=\"form-control\"\r\n\t\t\t\t\t\t\tid=\"c-message\"\r\n\t\t\t\t\t\t\tstyle=\"height: 240rpx;\"\r\n\t\t\t\t\t\t\tplaceholder-style=\"color:#B1B3C7\"\r\n\t\t\t\t\t\t\tplaceholder=\"遇到的问题、所需服务、产品等，我们将尽快与您取得联系\"\r\n\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<button @tap=\"post_leave_message\" class=\"leave_success u-reset-button\">确认留言</button>\r\n\t\t\t\t</form>\r\n\t\t\t</view>\r\n\t\t\t<!-- 留言板end -->\r\n\r\n\t\t\t<!-- 主界面  -->\r\n\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t<view class=\"content_wrapper\" v-if=\"!showLeaveMessage\" :style=\"{ height: 'calc(100vh - ' + writeBottom + 'px)' }\">\r\n\t\t\t\t<!-- #endif -->\r\n\t\t\t\t<!-- #ifndef H5 -->\r\n\t\t\t\t<view class=\"content_wrapper\" v-if=\"!showLeaveMessage\" :style=\"{ height: 'calc(100vh - ' + writeBottom + 'px)' }\">\r\n\t\t\t\t\t<!-- #endif -->\r\n\t\t\t\t\t<view :style=\"{ height: 'calc(100% - ' + wrapperHeight + 'px)' }\" class=\"chat_wrapper\">\r\n\t\t\t\t\t\t<!-- 遮罩 -->\r\n\t\t\t\t\t\t<view class=\"mask\" @tap=\"hideMask\" v-if=\"showTool || selectModel\"></view>\r\n\t\t\t\t\t\t<scroll-view\r\n\t\t\t\t\t\t\t@scrolltoupper=\"wrapper_scrolltoupper\"\r\n\t\t\t\t\t\t\t@tap=\"tap_scroll_view\"\r\n\t\t\t\t\t\t\t:scroll-y=\"true\"\r\n\t\t\t\t\t\t\t:scroll-with-animation=\"true\"\r\n\t\t\t\t\t\t\t:scroll-into-view=\"scrollIntoFooter\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<block v-for=\"(item, index) in messageList\" :key=\"item.datetime\">\r\n\t\t\t\t\t\t\t\t<view class=\"status\">\r\n\t\t\t\t\t\t\t\t\t<text>{{ item.datetime }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<block v-for=\"message in item.data\" :key=\"message.id\">\r\n\t\t\t\t\t\t\t\t\t<view v-if=\"message.message_type == 3\" class=\"status\">\r\n\t\t\t\t\t\t\t\t\t\t<text>{{ message.message }}</text>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"message-item u-flex u-row-center u-col-center\" :class=\"message.sender == 'me' ? 'message__right' : 'message__left'\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"head-img\"><image class=\"head-img\" v-if=\"message.sender == 'you'\"  :src=\"$IMG_URL + '/imgs/chat/sys_head.png'\" mode=\"\"></image></view>\r\n\t\t\t\t\t\t\t\t\t\t<view v-if=\"message.message_type != 3\" class=\"bubble\" :class=\"message.sender == 'me' ? 'me' : 'you'\">\r\n\t\t\t\t\t\t\t\t\t\t\t<!-- 除了商品/订单卡片和图片，其他的都使用富文本 -->\r\n\t\t\t\t\t\t\t\t\t\t\t<u-parse\r\n\t\t\t\t\t\t\t\t\t\t\t\t@imgtap=\"message_img_preview\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:tagStyle=\"{ img: 'width:50rpx;height:50rpx;'}\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"message.message_type == 0\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:html=\"message.message\"\r\n\t\t\t\t\t\t\t\t\t\t\t></u-parse>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<u-parse\r\n\t\t\t\t\t\t\t\t\t\t\t\tv-if=\"message.message_type == 2\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t:html=\"'<a target=_blank href=' + message.message + '>' + message.message + '</a>'\"\r\n\t\t\t\t\t\t\t\t\t\t\t></u-parse>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<image @tap=\"preview_img(message.message)\" v-if=\"message.message_type == 1\" :src=\"message.message\" mode=\"widthFix\"></image>\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t<view @tap=\"goDetail(message.message)\" v-if=\"message.message_type == 4 || message.message_type == 5\" class=\"project_item\" style=\"margin: 0;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<image :src=\"message.message.logo\"></image>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"project_item_body\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"project_item_title u-ellipsis-2\">{{ message.message.subject }}</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<view v-if=\"message.message.note\" style=\"width: 280rpx;margin-right: -20rpx;\" class=\"project_item_note one-t\">{{message.message.note}}</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"project_item_price\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text class=\"price\" v-if=\"message.message.price\">{{ message.message.price }}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<!-- \t<text class=\"unit\" v-if=\"message.message.number\">x{{message.message.number}}</text> -->\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"head-img\"><image class=\"head-img\" v-if=\"message.sender == 'me'\" :src=\"userInfo.avatar\" mode=\"\"></image></view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t</block>\r\n\r\n\t\t\t\t\t\t\t<view id=\"wrapper_footer\" style=\"height: 300rpx;\"></view>\r\n\t\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 消息输入 -->\r\n\t\t\t\t\t<view class=\"write\" :style=\"{ bottom: writeBottom + 'px' }\">\r\n\t\t\t\t\t\t\t<label class=\"widget_textarea\" v-if=\"!selectModel\">\r\n\t\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\t\t:show-confirm-bar=\"false\"\r\n\t\t\t\t\t\t\t\t\t:fixed=\"true\"\r\n\t\t\t\t\t\t\t\t\t:focus=\"kefuMessageFocus\"\r\n\t\t\t\t\t\t\t\t\t:auto-height=\"true\"\r\n\t\t\t\t\t\t\t\t\tmaxlength=\"-1\"\r\n\t\t\t\t\t\t\t\t\t@blur=\"kefu_message_blur\"\r\n\t\t\t\t\t\t\t\t\t@input=\"textarea_input\"\r\n\t\t\t\t\t\t\t\t\t:cursor-spacing=\"14\"\r\n\t\t\t\t\t\t\t\t\t@focus=\"textarea_focus\"\r\n\t\t\t\t\t\t\t\t\tplaceholder=\"请输入你要咨询的问题\"\r\n\t\t\t\t\t\t\t\t\tplaceholder-style=\"color:#999\"\r\n\t\t\t\t\t\t\t\t\tv-model=\"kefuMessage\"\r\n\t\t\t\t\t\t\t\t\tclass=\"kefu_message\"\r\n\t\t\t\t\t\t\t\t></textarea>\r\n\t\t\t\t\t\t\t</label>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view class=\"write_right\" :style=\"{ flex: showSendButton ? 3 : 2 }\">\r\n\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\tv-if=\"config.toolbar && config.toolbar.expression\"\r\n\t\t\t\t\t\t\t\t:style=\"{ background: 'url(' + config.toolbar.expression.icon_image + ') no-repeat', 'background-size': '100% 100%' }\"\r\n\t\t\t\t\t\t\t\tclass=\"toolbar_icon smiley\"\r\n\t\t\t\t\t\t\t\t@tap=\"show_tool('smiley')\"\r\n\t\t\t\t\t\t\t></text>\r\n\t\t\t\t\t\t\t<button class=\"send_btn\" @tap=\"send_message(kefuMessage, 0)\" hover-class=\"send_btn_hover\" v-if=\"showSendButton\">发送</button>\r\n\t\t\t\t\t\t\t<text\r\n\t\t\t\t\t\t\t\tclass=\"toolbar_icon attach\"\r\n\t\t\t\t\t\t\t\t:style=\"{ background: 'url(' + attachBackground + ') no-repeat', 'background-size': '100% 100%' }\"\r\n\t\t\t\t\t\t\t\t@tap=\"show_tool('more')\"\r\n\t\t\t\t\t\t\t\tv-if=\"!showSendButton && attachBackground\"\r\n\t\t\t\t\t\t\t></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view v-if=\"showTool\" class=\"footer_div\">\r\n\t\t\t\t\t\t<!-- 表情 -->\r\n\t\t\t\t\t\t<block v-if=\"showTool == 'smiley'\" v-for=\"(item, index) in expressionData\" :key=\"item.src\">\r\n\t\t\t\t\t\t\t<image :src=\"item.src\" @tap=\"select_expression(item.title)\"></image>\r\n\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t<!-- 表情end -->\r\n\t\t\t\t\t\t<!-- 更多 -->\r\n\t\t\t\t\t\t<view v-if=\"showTool == 'more'\" class=\"toolbar\">\r\n\t\t\t\t\t\t\t<view @tap=\"show_select_model('order')\" v-if=\"config.toolbar && config.toolbar.order\" class=\"toolbar_item\">\r\n\t\t\t\t\t\t\t\t<image class=\"tool-img\"  :src=\"config.toolbar.order.icon_image\"></image>\r\n\t\t\t\t\t\t\t\t<view>{{ config.toolbar.order.title }}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view @tap=\"show_select_model('goods')\" v-if=\"config.toolbar && config.toolbar.goods\" class=\"toolbar_item\">\r\n\t\t\t\t\t\t\t\t<image class=\"tool-img\" :src=\"config.toolbar.goods.icon_image\"></image>\r\n\t\t\t\t\t\t\t\t<view>{{ config.toolbar.goods.title }}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view @tap=\"upload_file\" v-if=\"config.toolbar && config.toolbar.file\" class=\"toolbar_item\">\r\n\t\t\t\t\t\t\t\t<image class=\"tool-img\"  :src=\"config.toolbar.file.icon_image\"></image>\r\n\t\t\t\t\t\t\t\t<view>{{ config.toolbar.file.title }}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 更多end -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 订单和商品选择 -->\r\n\t\t\t\t<view v-if=\"selectModel\" class=\"select_model\">\r\n\t\t\t\t\t<view class=\"u-flex u-row-between u-col-center select_model--head\">\r\n\t\t\t\t\t\t<view class=\"select-title-box\">\r\n\t\t\t\t\t\t\t<view class=\"title-text\">\r\n\t\t\t\t\t\t\t\t{{selectModelType[selectModel]}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"title-line\"></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view @tap=\"show_select_model(false)\" class=\"close_select\">\r\n\t\t\t\t\t\t\t<text class=\"u-iconfont uicon-close-circle-fill\" style=\"#e0e0e0;font-size: 36rpx;\"></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"project_list\">\r\n\t\t\t\t\t<radio-group style=\"width: 100%;\" v-if=\"selectModelData.length > 0\" @change=\"select_done\">\r\n\t\t\t\t\t\t<label v-for=\"(item, index) in selectModelData\" :key=\"item.id\" class=\"project_item\">\r\n\t\t\t\t\t\t\t<image :src=\"item.logo\"></image>\r\n\t\t\t\t\t\t\t<view class=\"project_item_body\">\r\n\t\t\t\t\t\t\t\t<view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"project_item_title u-ellipsis-2\">{{ item.subject }}</view>\r\n\t\t\t\t\t\t\t\t\t<view v-if=\"item.note\" style=\"width: 470rpx;\" class=\"project_item_note u-ellipsis-1\">{{ item.note }}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"project_item_price\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"price\" v-if=\"item.price\">{{ item.price }}</text>\r\n\t\t\t\t\t\t\t\t<!-- \t<text class=\"unit\" v-if=\"item.number\">x{{ item.number }}</text> -->\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<radio style=\"opacity: 0;width: 0;height: 0;\" :value=\"index.toString()\" :checked=\"false\" hide ></radio>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</radio-group>\r\n\t\t\t\t\t<view class=\"select_model_no_data\" v-if=\"selectModelData.length <= 0\"><text>没有更多记录了...</text></view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n\r\n<script>\r\nimport Config from './config.js'; // 本地配置数据\r\nlet token = uni.getStorageSync('token'); // 用户身份标识\r\nlet fixedCsr = ''; // 指定客服\r\nlet innerAudioContext = null;\r\nimport { mapMutations, mapActions, mapState,mapGetters } from 'vuex';\r\nimport Auth from '@/shopro/permission/index.js';\r\n\r\nexport default {\r\n\tcomponents: {},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\theadTitle: '客服',\r\n\t\t\tleaveMessage: {\r\n\t\t\t\tname: '',\r\n\t\t\t\tcontact: '',\r\n\t\t\t\tmessage: ''\r\n\t\t\t},\r\n\t\t\tattachBackground: '',\r\n\t\t\tshowSendButton: false,\r\n\t\t\tshowTool: false,\r\n\t\t\tshowLeaveMessage: false,\r\n\t\t\texpressionData: [],\r\n\t\t\tscrollIntoFooter: '',\r\n\t\t\tconfig: [],\r\n\t\t\ttokenList: [],\r\n\t\t\tkefuMessage: '',\r\n\t\t\twrapperHeight: 46,\r\n\t\t\tws: {\r\n\t\t\t\tSocketTask: null,\r\n\t\t\t\tTimer: null, // 计时器\r\n\t\t\t\tErrorMsg: [], // 发送失败的消息\r\n\t\t\t\tMaxRetryCount: 3, // 最大重连次数\r\n\t\t\t\tCurrentRetryCount: 0,\r\n\t\t\t\tsocketOpen: false,\r\n\t\t\t\tpageHideCloseWs: true,\r\n\t\t\t\tunloadCloseWs: false // ws关闭状态码兼容性不好，手动标记页面卸载关闭ws链接\r\n\t\t\t},\r\n\t\t\tcsr: '', // 当前用户的客服代表ID\r\n\t\t\tsessionId: 0, // 会话ID\r\n\t\t\tsessionUser: '', // 带身份标识的用户ID\r\n\t\t\tkefuMessageFocus: false,\r\n\t\t\tmessageList: [],\r\n\t\t\tchatRecordPage: 1,\r\n\t\t\terrorTips: '链接中...',\r\n\t\t\tselectModel: false,\r\n\t\t\tselectModelType: {\r\n\t\t\t\tgoods: '发送商品',\r\n\t\t\t\torder: '发送订单'\r\n\t\t\t},\r\n\t\t\tselectModelData: [],\r\n\t\t\twriteBottom: 0\r\n\t\t};\r\n\t},\r\n\tcomputed: {\r\n\t\t\t...mapGetters(['userInfo']),\r\n\t},\r\n\tprops: {\r\n\t\toptions: null\r\n\t},\r\n\tcreated() {\r\n\t\tfixedCsr = this.options?.fixed_csr ? this.options?.fixed_csr : fixedCsr;\r\n\t\tthis.load();\r\n\t},\r\n\tonShow() {\r\n\t\tif (!this.ws.pageHideCloseWs) {\r\n\t\t\tthis.ws.pageHideCloseWs = true;\r\n\t\t}\r\n\t\t// #ifdef MP-WEIXIN\r\n\t\tthis.load();\r\n\t\t// #endif\r\n\t},\r\n\tonHide() {\r\n\t\t// #ifdef MP-WEIXIN\r\n\t\tif (this.ws.SocketTask && this.ws.socketOpen && this.ws.pageHideCloseWs) {\r\n\t\t\tconsole.log('微信小程序页面hide主动关闭链接');\r\n\t\t\tuni.closeSocket();\r\n\t\t}\r\n\t\t// #endif\r\n\t\tuni.hideKeyboard();\r\n\t},\r\n\tbeforeDestroy() {\r\n\t\tif (this.ws.SocketTask && this.ws.socketOpen) {\r\n\t\t\tconsole.log('页面卸载主动关闭链接');\r\n\t\t\tthis.ws.unloadCloseWs = true;\r\n\t\t\tuni.closeSocket();\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t// 路由跳转\r\n\t\tjump(path, parmas) {\r\n\t\t\tthis.$Router.push({\r\n\t\t\t\tpath: path,\r\n\t\t\t\tquery: parmas\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 跳转详情\r\n\t\tgoDetail(msg) {\r\n\t\t\tmsg.number ? this.jump('/pages/order/detail', { id: msg.id }) : this.jump('/pages/goods/detail', { id: msg.id });\r\n\t\t},\r\n\t\t// 关闭遮罩\r\n\t\thideMask() {\r\n\t\t\tif (this.showTool) {\r\n\t\t\t\tthis.showTool = false;\r\n\t\t\t}\r\n\t\t\tif (this.selectModel) {\r\n\t\t\t\tthis.selectModel = false;\r\n\t\t\t}\r\n\t\t\tthis.writeBottom = 0;\r\n\t\t},\r\n\t\tload: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tvar kefu_tourists_token = '';\r\n\r\n\t\t\t// 初始化请求\r\n\t\t\ttry {\r\n\t\t\t\tvar kefu_tourists_token = uni.getStorageSync('kefu_tourists_token');\r\n\t\t\t\tif (!kefu_tourists_token) {\r\n\t\t\t\t\tkefu_tourists_token = '';\r\n\t\t\t\t}\r\n\t\t\t} catch (e) {\r\n\t\t\t\tconsole.error(e);\r\n\t\t\t}\r\n\t\t\tuni.request({\r\n\t\t\t\turl: that.build_url('initialize'),\r\n\t\t\t\tdata: {\r\n\t\t\t\t\ttoken: uni.getStorageSync('token'),\r\n\t\t\t\t\tkefu_tourists_token: kefu_tourists_token,\r\n\t\t\t\t\tfixed_csr: fixedCsr\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.data.code == 1) {\r\n\t\t\t\t\t\t// 保存游客token\r\n\t\t\t\t\t\tif (res.data.data.token_list.kefu_tourists_token) {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tuni.setStorageSync('kefu_tourists_token', res.data.data.token_list.kefu_tourists_token);\r\n\t\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\t\tconsole.error(e);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// 来信提示音初始化\r\n\t\t\t\t\t\tinnerAudioContext = uni.createInnerAudioContext();\r\n\t\t\t\t\t\tinnerAudioContext.src = that.build_url('message_prompt');\r\n\r\n\t\t\t\t\t\t// 公告\r\n\t\t\t\t\t\tvar kefu_notice = '';\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\tkefu_notice = uni.getStorageSync('kefu_notice');\r\n\t\t\t\t\t\t} catch (e) {\r\n\t\t\t\t\t\t\tconsole.log(e);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (kefu_notice == res.data.data.config.announcement) {\r\n\t\t\t\t\t\t\tres.data.data.config.announcement = '';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// 配置\r\n\t\t\t\t\t\tthat.config = res.data.data.config;\r\n\t\t\t\t\t\tthat.tokenList = res.data.data.token_list;\r\n\r\n\t\t\t\t\t\t// 新消息提示\r\n\t\t\t\t\t\tif (res.data.data.new_msg) {\r\n\t\t\t\t\t\t\tthat.new_message_prompt();\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// 初始化表情\r\n\t\t\t\t\t\tvar protocol = Config.https_switch ? 'https://' : 'http://';\r\n\t\t\t\t\t\tvar expression = {};\r\n\t\t\t\t\t\tfor (let i in Config.expression) {\r\n\t\t\t\t\t\t\texpression[i] = {\r\n\t\t\t\t\t\t\t\tsrc: protocol + Config.baseURL + '/assets/addons/kefu/img' + Config.expression[i].src,\r\n\t\t\t\t\t\t\t\ttitle: Config.expression[i].title\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.expressionData = expression;\r\n\t\t\t\t\t\t// 杂项资源\r\n\t\t\t\t\t\tthat.attachBackground = that.build_url('res', '/img/more.png');\r\n\r\n\t\t\t\t\t\t// 链接ws\r\n\t\t\t\t\t\tthat.connect_socket();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// uni.showModal({\r\n\t\t\t\t\t\t// \tcontent: res.data.msg,\r\n\t\t\t\t\t\t// \tshowCancel: false,\r\n\t\t\t\t\t\t// \tsuccess: res => {\r\n\t\t\t\t\t\t// \t\tif (res.confirm) {\r\n\t\t\t\t\t\t// \t\t\tuni.navigateBack({\r\n\t\t\t\t\t\t// \t\t\t\tdelta: 1\r\n\t\t\t\t\t\t// \t\t\t});\r\n\t\t\t\t\t\t// \t\t}\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// });\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: res => {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '温馨提示',\r\n\t\t\t\t\t\tcontent: '在线客服初始化失败,请重试~',\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthat.errorTips = '初始化失败';\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tswitch_show_tool: function(value) {\r\n\t\t\tif (!value) {\r\n\t\t\t\tthis.showTool = false;\r\n\t\t\t\tthis.writeBottom = 0;\r\n\t\t\t} else {\r\n\t\t\t\tthis.showTool = value;\r\n\t\t\t\tthis.writeBottom = 170;\r\n\t\t\t\tthis.scroll_into_footer(200);\r\n\t\t\t}\r\n\t\t},\r\n\t\tclose_notice: function() {\r\n\t\t\tuni.setStorageSync('kefu_notice', this.config.announcement);\r\n\t\t\tthis.config.announcement = '';\r\n\t\t},\r\n\t\tselect_done: function(e) {\r\n\t\t\tlet index = e.detail.value;\r\n\t\t\tvar message = '';\r\n\t\t\tfor (let i in this.selectModelData[index]) {\r\n\t\t\t\tmessage += i + '=' + this.selectModelData[index][i] + '#';\r\n\t\t\t}\r\n\t\t\tthis.send_message(message, this.selectModel == 'goods' ? 4 : 5);\r\n\t\t\tthis.selectModel = false;\r\n\t\t\tthis.switch_show_tool(false);\r\n\t\t},\r\n\t\tshow_select_model: function(name) {\r\n\t\t\tthis.selectModel = name;\r\n\t\t\tif (!name) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tuni.showLoading({\r\n\t\t\t\ttitle: '请稍后...'\r\n\t\t\t});\r\n\r\n\t\t\tvar data_api_url = this.config.toolbar[name].data_api;\r\n\t\t\tvar reg = new RegExp('(^https?:\\/\\/)', 'i');\r\n\t\t\tif (data_api_url.search(reg) === -1) {\r\n\t\t\t\tdata_api_url = (Config.https_switch ? 'https://' : 'http://') + Config.baseURL + data_api_url;\r\n\t\t\t}\r\n\r\n\t\t\tthis.selectModelData = [];\r\n\r\n\t\t\tuni.request({\r\n\t\t\t\turl: data_api_url,\r\n\t\t\t\tdata: {\r\n\t\t\t\t\ttoken: uni.getStorageSync('token')\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: res => {\r\n\t\t\t\t\tif (res.data.code == 1) {\r\n\t\t\t\t\t\tthis.selectModelData = res.data.data.data;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: '温馨提示',\r\n\t\t\t\t\t\t\tcontent: res.data.msg,\r\n\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\tfail: res => {\r\n\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\ttitle: '温馨提示',\r\n\t\t\t\t\t\tcontent: '网络请求失败，请重试！',\r\n\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t});\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: res => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\tparseUrl: function(data) {\r\n\t\t\tvar reg = new RegExp('(https?:\\/\\/)([0-9a-z.]+)([\\?0-9a-z&=]+)?(#[0-9-a-z]+)?', 'g');\r\n\t\t\treturn data.replace(reg, '<a target=\"_blank\" title=\"$&\" class=\"link\" href=\"$&\">$&</a>');\r\n\t\t},\r\n\t\tmessage_img_preview: function(e) {\r\n\t\t\tthis.ws.pageHideCloseWs = false; // 页面hide不关闭链接\r\n\t\t},\r\n\t\tpreview_img: function(src) {\r\n\t\t\tthis.ws.pageHideCloseWs = false; // 页面hide不关闭链接\r\n\t\t\tuni.previewImage({\r\n\t\t\t\tcurrent: src,\r\n\t\t\t\turls: [src]\r\n\t\t\t});\r\n\t\t},\r\n\t\tasync upload_file() {\r\n\t\t\tlet authState = await new Auth('writePhotosAlbum').check();\r\n\t\t\tif (authState) {\r\n\t\t\t\t// #ifdef APP-VUE\r\n\t\t\t\t// #endif\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthat.ws.pageHideCloseWs = false; // 页面hide不关闭链接\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconst tempFilePaths = res.tempFilePaths;\r\n\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: '正在上传...'\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tconst uploadTask = uni.uploadFile({\r\n\t\t\t\t\t\t\turl: that.build_url('upload'),\r\n\t\t\t\t\t\t\t// #ifdef APP-PLUS || H5\r\n\t\t\t\t\t\t\tfile: res.tempFiles[0],\r\n\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\tfilePath: tempFilePaths[0],\r\n\t\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\ttoken: uni.getStorageSync('token')\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\tthat.ws.pageHideCloseWs = true;\r\n\t\t\t\t\t\t\t\tres = JSON.parse(res.data);\r\n\t\t\t\t\t\t\t\tif (res.code == 1) {\r\n\t\t\t\t\t\t\t\t\tthat.send_message(res.data, 1);\r\n\t\t\t\t\t\t\t\t\tthat.switch_show_tool(false);\r\n\t\t\t\t\t\t\t\t\tthat.kefuMessageFocus = true;\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\t\t\t\ttitle: '温馨提示',\r\n\t\t\t\t\t\t\t\t\t\tcontent: res.msg,\r\n\t\t\t\t\t\t\t\t\t\tshowCancel: false\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tcomplete: res => {\r\n\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// #ifndef APP-PLUS\r\n\t\t\t\t\t\tuploadTask.onProgressUpdate(res => {\r\n\t\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\t\ttitle: res.progress + '%'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\tconnect_socket: function() {\r\n\t\t\tvar that = this;\r\n\r\n\t\t\tif (this.ws.SocketTask && this.ws.socketOpen) {\r\n\t\t\t\tconsole.log('无需链接');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// 开始链接\r\n\t\t\tthat.ws.SocketTask = uni.connectSocket({\r\n\t\t\t\turl: this.build_url('ws'),\r\n\t\t\t\theader: {\r\n\t\t\t\t\t'content-type': 'application/json'\r\n\t\t\t\t},\r\n\t\t\t\tcomplete: res => {}\r\n\t\t\t});\r\n\r\n\t\t\t// 链接打开\r\n\t\t\tuni.onSocketOpen(function(res) {\r\n\t\t\t\tconsole.log('链接已打开');\r\n\t\t\t\tthat.ws.socketOpen = true;\r\n\t\t\t\tthat.ws.CurrentRetryCount = 0;\r\n\t\t\t\t// 重新发送所有出错的消息\r\n\t\t\t\tfor (let i in that.ws.ErrorMsg) {\r\n\t\t\t\t\tthat.ws_send(that.ws.ErrorMsg[i]);\r\n\t\t\t\t}\r\n\t\t\t\tthat.ws.ErrorMsg = [];\r\n\t\t\t\tthat.errorTips = '';\r\n\r\n\t\t\t\tif (that.ws.Timer != null) {\r\n\t\t\t\t\tclearInterval(that.ws.Timer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthat.ws.Timer = setInterval(that.ws_send, 28000); //定时发送心跳\r\n\t\t\t});\r\n\r\n\t\t\t// 收到消息\r\n\t\t\tuni.onSocketMessage(function(res) {\r\n\t\t\t\tlet msg = JSON.parse(res.data);\r\n\t\t\t\tthat.domsg(msg);\r\n\t\t\t});\r\n\r\n\t\t\t// 出错\r\n\t\t\tuni.onSocketError(function(res) {\r\n\t\t\t\tthat.ws.socketOpen = false;\r\n\t\t\t\tthat.errorTips = 'WebSocket 发生错误!';\r\n\t\t\t\tconsole.log('链接出错', res);\r\n\t\t\t});\r\n\r\n\t\t\t// 链接关闭\r\n\t\t\tuni.onSocketClose(function(res) {\r\n\t\t\t\t// 工具上是1000，真机上测试是10000\r\n\t\t\t\tconsole.log('链接已关闭', res);\r\n\t\t\t\tthat.ws.socketOpen = false;\r\n\t\t\t\tif (res.code == 1000 || res.code == 10000 || that.ws.unloadCloseWs) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (that.ws.Timer != null) {\r\n\t\t\t\t\tclearInterval(that.ws.Timer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthat.ws.socketOpen = false;\r\n\t\t\t\tif (that.errorTips.indexOf('重连') === -1) {\r\n\t\t\t\t\tthat.errorTips = '网络链接已断开!';\r\n\t\t\t\t}\r\n\t\t\t\tif (that.ws.MaxRetryCount) {\r\n\t\t\t\t\tthat.ws.Timer = setInterval(that.retry_websocket, 3000); //每3秒重新连接一次\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t},\r\n\t\t// 重连ws\r\n\t\tretry_websocket: function() {\r\n\t\t\tvar that = this;\r\n\t\t\tif (that.ws.CurrentRetryCount < that.ws.MaxRetryCount) {\r\n\t\t\t\tthat.ws.CurrentRetryCount++;\r\n\t\t\t\tthat.connect_socket();\r\n\t\t\t\tthat.errorTips = '重连WebSocket第' + that.ws.CurrentRetryCount + '次';\r\n\t\t\t} else {\r\n\t\t\t\tif (that.ws.Timer != null) {\r\n\t\t\t\t\tclearInterval(that.ws.Timer);\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthat.errorTips = '每隔10秒将再次尝试重连 WebSocket';\r\n\t\t\t\tthat.ws.Timer = setInterval(that.connect_socket, 10000); //每10秒重新连接一次\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 发送ws消息\r\n\t\tws_send: function(message) {\r\n\t\t\tvar that = this;\r\n\t\t\tif (!message) {\r\n\t\t\t\tmessage = {\r\n\t\t\t\t\tc: 'Message',\r\n\t\t\t\t\ta: 'ping'\r\n\t\t\t\t};\r\n\t\t\t}\r\n\r\n\t\t\tif (that.ws.SocketTask && that.ws.socketOpen) {\r\n\t\t\t\tuni.sendSocketMessage({\r\n\t\t\t\t\tdata: JSON.stringify(message)\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tconsole.log('消息发送出错', message, that.ws.SocketTask, that.ws.socketOpen);\r\n\t\t\t\tthat.ws.ErrorMsg.push(message);\r\n\t\t\t}\r\n\t\t},\r\n\t\tsend_message: function(message, message_type) {\r\n\t\t\tvar that = this;\r\n\t\t\tif (message == '') {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请输入消息内容',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t// 检查 websocket 是否连接\r\n\t\t\tif (!that.ws.SocketTask || !that.ws.socketOpen) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '网络链接异常，请稍后重试~',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (!that.sessionId) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请选择一个会话~',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tif (message_type == 0) {\r\n\t\t\t\t// 处理链接\r\n\t\t\t\tmessage = that.parseUrl(message);\r\n\r\n\t\t\t\t// 处理表情\r\n\t\t\t\tvar reg = /\\[(.+?)\\]/g; // [] 中括号\r\n\t\t\t\tvar reg_match = message.match(reg);\r\n\r\n\t\t\t\tif (reg_match) {\r\n\t\t\t\t\tfor (let i in reg_match) {\r\n\t\t\t\t\t\tvar emoji_item = that.find_emoji(reg_match[i]);\r\n\t\t\t\t\t\tmessage = message.replace(emoji_item.title, that.build_chat_img(emoji_item.src, '', 'emoji'));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar load_message = {\r\n\t\t\t\tc: 'Message',\r\n\t\t\t\ta: 'sendMessage',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tmessage: message_type == 1 ? message.url : message,\r\n\t\t\t\t\tmessage_type: message_type,\r\n\t\t\t\t\tsession_id: that.sessionId,\r\n\t\t\t\t\tmodulename: 'index'\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthat.ws_send(load_message);\r\n\r\n\t\t\tlet message_data = that.messageList[that.messageList.length - 1].data;\r\n\t\t\tlet message_id = message_data[message_data.length - 1].id + 1;\r\n\r\n\t\t\tvar data = {\r\n\t\t\t\tid: message_id,\r\n\t\t\t\tsender: 'me',\r\n\t\t\t\tmessage: message_type == 1 ? message.fullurl : message,\r\n\t\t\t\tmessage_type: message_type\r\n\t\t\t};\r\n\r\n\t\t\tvar messageListIndex = that.messageList.length - 1;\r\n\t\t\tif (that.messageList[messageListIndex] && that.messageList[messageListIndex].datetime == '刚刚') {\r\n\t\t\t\tthat.messageList[messageListIndex].data = that.messageList[messageListIndex].data.concat(that.format_message([data]));\r\n\t\t\t} else {\r\n\t\t\t\tthat.messageList = that.messageList.concat({\r\n\t\t\t\t\tdatetime: '刚刚',\r\n\t\t\t\t\tdata: that.format_message([data])\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthat.kefuMessage = '';\r\n\t\t\tthat.kefu_message_change();\r\n\t\t\tthat.scroll_into_footer(300);\r\n\t\t\tthat.wrapperHeight = 46;\r\n\t\t},\r\n\t\tfind_emoji: function(emoji_title) {\r\n\t\t\tfor (let i in this.expressionData) {\r\n\t\t\t\tif (this.expressionData[i].title == emoji_title) {\r\n\t\t\t\t\treturn this.expressionData[i];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn false;\r\n\t\t},\r\n\t\tbuild_chat_img: function(filename, facename, class_name = 'emoji') {\r\n\t\t\tvar protocol = Config.https_switch ? 'https://' : 'http://';\r\n\t\t\tif (class_name == 'emoji') {\r\n\t\t\t\treturn '<img class=\"emoji\" src=\"' + filename + '\" />';\r\n\t\t\t} else {\r\n\t\t\t\treturn '<img class=\"' + class_name + '\" src=\"' + filename + '\" />';\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 记录用户填写的留言数据，方便后续清空输入等处理\r\n\t\tleave_message: function(e) {\r\n\t\t\tif (e.currentTarget.id == 'c-name') {\r\n\t\t\t\tthis.leaveMessage.name = e.detail.value;\r\n\t\t\t} else if (e.currentTarget.id == 'c-contact') {\r\n\t\t\t\tthis.leaveMessage.contact = e.detail.value;\r\n\t\t\t} else if (e.currentTarget.id == 'c-message') {\r\n\t\t\t\tthis.leaveMessage.message = e.detail.value;\r\n\t\t\t}\r\n\t\t},\r\n\t\tpost_leave_message: function() {\r\n\t\t\tif (!this.leaveMessage.contact) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '联系方式不能为空哦~',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\r\n\t\t\tvar leave_message = {\r\n\t\t\t\tc: 'Message',\r\n\t\t\t\ta: 'leaveMessage',\r\n\t\t\t\tdata: this.leaveMessage\r\n\t\t\t};\r\n\t\t\tthis.ws_send(leave_message);\r\n\t\t},\r\n\t\tdomsg: function(msg) {\r\n\t\t\tvar that = this;\r\n\t\t\tif (msg.msgtype == 'initialize') {\r\n\t\t\t\tif (msg.data.new_msg) {\r\n\t\t\t\t\tthat.new_message_prompt();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// 分配/获取客服->获取聊天记录\r\n\t\t\t\tvar user_initialize = {\r\n\t\t\t\t\tc: 'Message',\r\n\t\t\t\t\ta: 'userInitialize',\r\n\t\t\t\t\tdata: {\r\n\t\t\t\t\t\tfixed_csr: that.fixedCsr\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\tthat.ws_send(user_initialize);\r\n\t\t\t} else if (msg.msgtype == 'user_initialize') {\r\n\t\t\t\t// 用户客服分配结束\r\n\t\t\t\tif (msg.code == 1) {\r\n\t\t\t\t\tif (msg.data.session.user_tourists) {\r\n\t\t\t\t\t\tthat.send_message = function() {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '为保护您的隐私请,请登录后发送消息~',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tthat.csr = msg.data.session.csr;\r\n\t\t\t\t\tthat.sessionId = msg.data.session.id;\r\n\t\t\t\t\tthat.showLeaveMessage = false;\r\n\t\t\t\t\tthat.headTitle = '客服 ' + msg.data.session.nickname + ' 为您服务';\r\n\t\t\t\t} else if (msg.code == 302) {\r\n\t\t\t\t\tif (!that.csr) {\r\n\t\t\t\t\t\t// 打开留言板\r\n\t\t\t\t\t\tthat.csr = 'none';\r\n\t\t\t\t\t\tthat.showLeaveMessage = true;\r\n\t\t\t\t\t\tthat.headTitle = '当前无客服在线哦~';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '当前客服暂时离开,您可以直接发送离线消息~',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (msg.msgtype == 'show_msg') {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: msg.msg,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t} else if (msg.msgtype == 'leave_message') {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: msg.msg,\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t});\r\n\t\t\t\tthis.leaveMessage = {\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tcontact: '',\r\n\t\t\t\t\tmessage: ''\r\n\t\t\t\t};\r\n\t\t\t} else if (msg.msgtype == 'clear') {\r\n\t\t\t\tif (msg.msg) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: msg.msg,\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar clear = {\r\n\t\t\t\t\tc: 'Message',\r\n\t\t\t\t\ta: 'clear'\r\n\t\t\t\t};\r\n\t\t\t\tthat.ws_send(clear);\r\n\r\n\t\t\t\tthat.retry_webSocket = function() {\r\n\t\t\t\t\tclearInterval(that.ws.Timer);\r\n\t\t\t\t};\r\n\t\t\t} else if (msg.msgtype == 'offline') {\r\n\t\t\t\tif (msg.user_id == that.csr) {\r\n\t\t\t\t\tthis.errorTips = '客服离线~';\r\n\t\t\t\t}\r\n\t\t\t} else if (msg.msgtype == 'online') {\r\n\t\t\t\t// 来自 admin 的用户上线\r\n\t\t\t\tif (msg.modulename == 'admin') {\r\n\t\t\t\t\tif (msg.user_id == that.csr) {\r\n\t\t\t\t\t\tthis.errorTips = '';\r\n\t\t\t\t\t} else if (that.csr == 'none') {\r\n\t\t\t\t\t\t// 重新为用户分配客服代表\r\n\t\t\t\t\t\tvar user_initialize = {\r\n\t\t\t\t\t\t\tc: 'Message',\r\n\t\t\t\t\t\t\ta: 'userInitialize'\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tthat.ws_send(user_initialize);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (msg.msgtype == 'csr_change_status') {\r\n\t\t\t\tif (that.csr == msg.data.csr) {\r\n\t\t\t\t\tif (msg.data.csr_status != 3) {\r\n\t\t\t\t\t\tthat.errorTips = '客服' + that.get_csr_status(msg.data.csr_status) + '~';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.errorTips = '';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else if (msg.msgtype == 'transfer_done') {\r\n\t\t\t\tthat.csr = msg.data.csr;\r\n\t\t\t\tthat.headTitle = '客服 ' + msg.data.nickname + ' 为您服务';\r\n\t\t\t} else if (msg.msgtype == 'new_message') {\r\n\t\t\t\tthat.new_message_prompt();\r\n\r\n\t\t\t\tif (msg.data.session_id == that.sessionId) {\r\n\t\t\t\t\tvar messageListIndex = that.messageList.length - 1;\r\n\t\t\t\t\tif (that.messageList[messageListIndex].datetime == '刚刚') {\r\n\t\t\t\t\t\tthat.messageList[messageListIndex].data = that.messageList[messageListIndex].data.concat(that.format_message([msg.data]));\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.messageList = that.messageList.concat({\r\n\t\t\t\t\t\t\tdatetime: '刚刚',\r\n\t\t\t\t\t\t\tdata: that.format_message([msg.data])\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar load_message = {\r\n\t\t\t\t\t\tc: 'Message',\r\n\t\t\t\t\t\ta: 'readMessage',\r\n\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\trecord_id: msg.data.record_id\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t\tthat.ws_send(load_message);\r\n\r\n\t\t\t\t\tthat.scroll_into_footer(800);\r\n\t\t\t\t}\r\n\t\t\t} else if (msg.msgtype == 'chat_record') {\r\n\t\t\t\t// 下一页\r\n\t\t\t\tthat.chatRecordPage = msg.data.next_page;\r\n\t\t\t\tfor (let i in msg.data.chat_record) {\r\n\t\t\t\t\tmsg.data.chat_record[i].data = that.format_message(msg.data.chat_record[i].data);\r\n\t\t\t\t}\r\n\t\t\t\tif (msg.data.page == 1) {\r\n\t\t\t\t\tthat.messageList = msg.data.chat_record;\r\n\t\t\t\t\t// 滑动到最后一条消息\r\n\t\t\t\t\tthat.scroll_into_footer(800);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfor (let i = msg.data.chat_record.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\tmsg.data.chat_record[i].data.reverse();\r\n\t\t\t\t\t\tthat.messageList.unshift(msg.data.chat_record[i]);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tget_csr_status: function(status) {\r\n\t\t\tswitch (parseInt(status)) {\r\n\t\t\t\tcase 0:\r\n\t\t\t\t\tstatus = '离线';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 1:\r\n\t\t\t\t\tstatus = '繁忙';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 2:\r\n\t\t\t\t\tstatus = '离开';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 3:\r\n\t\t\t\t\tstatus = '在线';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 99:\r\n\t\t\t\t\tstatus = '断链';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tstatus = '未知';\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\r\n\t\t\treturn status;\r\n\t\t},\r\n\t\tbuild_url: function(type = 'ws', res_path) {\r\n\t\t\tvar that = this;\r\n\t\t\tvar protocol = Config.https_switch ? 'https://' : 'http://';\r\n\r\n\t\t\tswitch (type) {\r\n\t\t\t\t//websocket聊天\r\n\t\t\t\tcase 'ws':\r\n\t\t\t\t\tlet tokenStr = '&token=' + (that.tokenList.kefu_token ? that.tokenList.kefu_token : '');\r\n\t\t\t\t\tlet kefu_user = '&kefu_tourists_token=' + (that.tokenList.kefu_tourists_token ? that.tokenList.kefu_tourists_token : '');\r\n\t\t\t\t\tlet baseUrl = Config.baseURL.split(':')[0];\r\n\t\t\t\t\tprotocol = parseInt(that.config.wss_switch) == 1 ? 'wss://' : 'ws://';\r\n\r\n\t\t\t\t\treturn (protocol + baseUrl + ':' + that.config.websocket_port + '/?modulename=index' + tokenStr + kefu_user).replace(/\\|/g, '~');\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//初始化\r\n\t\t\t\tcase 'initialize':\r\n\t\t\t\t\treturn protocol + Config.baseURL + '/addons/kefu/index/initialize?modulename=index';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//上传图片\r\n\t\t\t\tcase 'upload':\r\n\t\t\t\t\treturn protocol + Config.baseURL + '/addons/shopro/index/upload';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//发送消息\r\n\t\t\t\tcase 'message_prompt':\r\n\t\t\t\t\tif (that.config.__CDN__) {\r\n\t\t\t\t\t\treturn that.config.__CDN__ + '/assets/addons/kefu/audio/message_prompt.wav';\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn protocol + Config.baseURL + '/assets/addons/kefu/audio/message_prompt.wav';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'res':\r\n\t\t\t\t\tif (that.config.__CDN__) {\r\n\t\t\t\t\t\treturn that.config.__CDN__ + '/assets/addons/kefu' + res_path;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn protocol + Config.baseURL + '/assets/addons/kefu' + res_path;\r\n\t\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t},\r\n\t\tnew_message_prompt: function() {\r\n\t\t\tif (innerAudioContext) {\r\n\t\t\t\tinnerAudioContext.play();\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tinnerAudioContext.stop();\r\n\t\t\t\t}, 1000);\r\n\t\t\t} else {\r\n\t\t\t\tconsole.error('来信提示音播放失败！');\r\n\t\t\t}\r\n\t\t},\r\n\t\tscroll_into_footer: function(timeout = 0) {\r\n\t\t\tvar that = this;\r\n\t\t\tsetTimeout(function() {\r\n\t\t\t\tthat.scrollIntoFooter = 'wrapper_footer';\r\n\t\t\t}, timeout);\r\n\t\t\tthat.scrollIntoFooter = '';\r\n\t\t},\r\n\t\twrapper_scrolltoupper: function() {\r\n\t\t\tif (!this.sessionId || this.chatRecordPage == 'done') {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\t// 加载历史聊天记录\r\n\t\t\tvar load_message = {\r\n\t\t\t\tc: 'Message',\r\n\t\t\t\ta: 'chatRecord',\r\n\t\t\t\tdata: {\r\n\t\t\t\t\tsession_id: this.sessionId,\r\n\t\t\t\t\tpage: this.chatRecordPage\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tthis.ws_send(load_message);\r\n\t\t},\r\n\t\ttap_scroll_view: function() {\r\n\t\t\tthis.switch_show_tool(false);\r\n\t\t},\r\n\t\tshow_tool: function(name = 'smiley') {\r\n\t\t\tif (this.showTool == name) {\r\n\t\t\t\tthis.switch_show_tool(false);\r\n\t\t\t} else {\r\n\t\t\t\tthis.switch_show_tool(name);\r\n\t\t\t}\r\n\r\n\t\t\tif (this.showTool) {\r\n\t\t\t\tthis.scroll_into_footer();\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 输入框聚焦\r\n\t\ttextarea_focus: function(e) {\r\n\t\t\tvar that = this;\r\n\t\t\tthis.showTool = false;\r\n\t\t\t// that.writeBottom = e.detail.height ? e.detail.height : 0;\r\n\t\t},\r\n\t\t// 输入框输入\r\n\t\ttextarea_input: function(e) {\r\n\t\t\t// this.kefuMessage = e.detail.value;\r\n\t\t\tthis.kefu_message_change();\r\n\t\t},\r\n\t\t// 显示/隐藏发送按钮-调整消息记录框高度\r\n\t\tkefu_message_change: function() {\r\n\t\t\tthis.showSendButton = this.kefuMessage == '' ? false : true;\r\n\t\t\tlet write = uni\r\n\t\t\t\t.createSelectorQuery()\r\n\t\t\t\t.in(this)\r\n\t\t\t\t.select('.write');\r\n\t\t\twrite\r\n\t\t\t\t.fields(\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsize: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdata => {\r\n\t\t\t\t\t\tif (data.height != this.wrapperHeight) {\r\n\t\t\t\t\t\t\tthis.wrapperHeight = data.height;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t)\r\n\t\t\t\t.exec();\r\n\t\t},\r\n\t\t// 消息框焦点\r\n\t\tkefu_message_blur: function() {\r\n\t\t\tthis.kefuMessageFocus = false;\r\n\t\t\tif (!this.showTool) {\r\n\t\t\t\tthis.writeBottom = 0;\r\n\t\t\t}\r\n\t\t},\r\n\t\tselect_expression: function(title) {\r\n\t\t\tthis.kefuMessage = this.kefuMessage + title;\r\n\t\t\tthis.kefu_message_change();\r\n\t\t},\r\n\t\tformat_message: function(message) {\r\n\t\t\tfor (let i in message) {\r\n\t\t\t\tif (message[i].message_type == 4 || message[i].message_type == 5) {\r\n\t\t\t\t\tvar message_arr = message[i].message.split('#');\r\n\t\t\t\t\tvar message_obj = {};\r\n\r\n\t\t\t\t\tfor (let y in message_arr) {\r\n\t\t\t\t\t\tlet message_temp = message_arr[y].split('=');\r\n\t\t\t\t\t\tif (typeof message_temp[1] != 'undefined') {\r\n\t\t\t\t\t\t\tmessage_obj[message_temp[0]] = message_temp[1];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tmessage[i].message = message_obj;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn message;\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n* {\r\n\tpadding: 0;\r\n\tmargin: 0;\r\n}\r\n\r\npage {\r\n\toverflow: hidden;\r\n}\r\n\r\n.kefu_container {\r\n\theight: calc(100vh - var(--window-top));\r\n\theight: 100%;\r\n\toverflow: hidden;\r\n\tbackground-color: #f8fbfb;\r\n}\r\n\r\n.error_tips {\r\n\t// position: fixed;\r\n\t// top: var(--window-top);\r\n\t// top: 80rpx;\r\n\twidth: 100%;\r\n\theight: 80rpx;\r\n\tfont-size: 30rpx;\r\n\tline-height: 80rpx;\r\n\tbackground: rgba(231, 76, 60, 0.7);\r\n\tz-index: 999;\r\n\tcolor: #ffffff;\r\n\ttext-align: center;\r\n}\r\n\r\n.notice {\r\n\t// position: fixed;\r\n\t// top: var(--window-top);\r\n\t// top: 80rpx;\r\n\twidth: 100%;\r\n\tfont-size: 26rpx;\r\n\tfont-weight: 400;\r\n\tcolor: rgba(204, 149, 59, 1);\r\n\tline-height: 40rpx;\r\n\tpadding: 16rpx;\r\n\tbox-sizing: border-box;\r\n\tbackground: rgba(252, 248, 227, 0.7);\r\n\tcolor: #c09853;\r\n\tz-index: 999;\r\n}\r\n\r\n.close_notice {\r\n\twidth: 100rpx;\r\n\tfont-size: 40rpx;\r\n}\r\n\r\n// 选择商品\r\n.mask {\r\n\tposition: fixed;\r\n\twidth: 100%;\r\n\theight: 100%;\r\n\tbackground: rgba(#000, 0.3);\r\n\tz-index: 11;\r\n}\r\n.select_model {\r\n\tbackground-color: #f2f2f2;\r\n\tposition: fixed;\r\n\tbottom: 0rpx;\r\n\tz-index: 998;\r\n\twidth: 100%;\r\n\tborder-top-left-radius: 20rpx;\r\n\tborder-top-right-radius: 20rpx;\r\n\t.select_model--head {\r\n\t\tbackground-color: #fff;\r\n\t\theight: 82rpx;\r\n\t\tpadding: 0 26rpx;\r\n\t\tborder-radius: 20rpx 20rpx 0 0;\r\n\t\t.select-title-box {\r\n\t\t\tline-height: 82rpx;\r\n\t\t\t.title-text {\r\n\t\t\t\tfont-size: 30rpx;\r\n\t\t\t\tfont-family: PingFang SC;\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t\tcolor: rgba(51, 51, 51, 1);\r\n\t\t\t\tline-height: 76rpx;\r\n\t\t\t}\r\n\t\t\t.title-line {\r\n\t\t\t\twidth: 120rpx;\r\n\t\t\t\theight: 6rpx;\r\n\t\t\t\tbackground: rgba(230, 184, 115, 1);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.close_select {\r\n\tfont-size: 40rpx;\r\n\tpadding: 20rpx 0;\r\n\tcolor: #e0e0e0;\r\n}\r\n\r\n.project_list {\r\n\tflex: 1;\r\n\toverflow-x: hidden;\r\n\theight: 440rpx;\r\n\tpadding: 20rpx 0;\r\n}\r\n\r\n.project_item {\r\n\tbackground-color: #ffffff;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tpadding: 16rpx 8rpx 16rpx 16rpx;\r\n\tmargin: 10rpx 20rpx;\r\n\tborder-radius: 20rpx;\r\n}\r\n\r\n.project_item:last-child {\r\n\tmargin-bottom: 0;\r\n}\r\n\r\n.project_item image {\r\n\twidth: 160rpx;\r\n\theight: 160rpx;\r\n\tmin-width: 160rpx;\r\n}\r\n\r\n.project_item_body {\r\n\tmin-height: 170rpx;\r\n\twidth: 100%;\r\n\tmargin: 0 16rpx;\r\n\talign-items: flex-start;\r\n}\r\n\r\n.project_item_title {\r\n\tfont-size: 26rpx;\r\n\tline-height: 32rpx;\r\n\tcolor: #333333;\r\n}\r\n\r\n.project_item_note {\r\n\tfont-size: 26rpx;\r\n\tcolor: #999999;\r\n\tline-height: 32rpx;\r\n\tmargin-top: 6rpx;\r\n\t// width: 250rpx;\r\n}\r\n.project_item_price {\r\n\t.price {\r\n\t\tcolor: #e1212b;\r\n\t\tfont-size: 28rpx;\r\n\t\t&::before {\r\n\t\t\tcontent: '￥';\r\n\t\t\tfont-size: 20rpx;\r\n\t\t}\r\n\t}\r\n\t.unit {\r\n\t\tcolor: #999999;\r\n\t\tfont-size: 22rpx;\r\n\t\tmargin-left: 20rpx;\r\n\t}\r\n}\r\n\r\n// .project_item_price text:last-child {\r\n// \tmargin-left: 16rpx;\r\n// \tcolor: #999999;\r\n// \tfont-size: 26rpx;\r\n// }\r\n\r\n// .project_item_price text:first-child {\r\n// \tmargin-left: -6rpx;\r\n// \tfont-size: 34rpx;\r\n// \tcolor: rgba(231, 76, 60, 1);\r\n// }\r\n\r\n.select_model_no_data {\r\n\tfont-size: 30rpx;\r\n\theight: 100%;\r\n\tbackground: #ffffff;\r\n\tcolor: #999999;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n\r\n.content_wrapper {\r\n}\r\n\r\n.chat_wrapper {\r\n\tbackground-color: #f8fbfb;\r\n\twidth: 100%;\r\n\tbox-sizing: border-box;\r\n\tcolor: #181818;\r\n}\r\n\r\n.chat_wrapper scroll-view {\r\n\theight: 100%;\r\n}\r\n\r\n.chat_wrapper .status {\r\n\t// position: relative;\r\n\t// float: right;\r\n\twidth: 100%;\r\n\tmargin: 20rpx;\r\n\ttext-align: center;\r\n\theight: 60rpx;\r\n\tline-height: 60rpx;\r\n}\r\n\r\n.chat_wrapper .status text {\r\n\tfont-size: 24rpx;\r\n\t// display: inline-block;\r\n\tbackground: #ccc;\r\n\tcolor: #fff;\r\n\tborder-radius: 17rpx;\r\n\tpadding: 6rpx 20rpx;\r\n\tline-height: 24rpx;\r\n}\r\n\r\n// 消息列表\r\n.message-item {\r\n\talign-items: flex-start;\r\n\tmargin: 20rpx;\r\n\t.head-img {\r\n\t\twidth: 70rpx;\r\n\t\theight: 70rpx;\r\n\t\tborder-radius: 50%;\r\n\t}\r\n}\r\n.message__left {\r\n\tjustify-content: flex-start;\r\n}\r\n.message__right {\r\n\tjustify-content: flex-end;\r\n}\r\n.chat_wrapper .bubble {\r\n\tfont-size: 26rpx;\r\n\tposition: relative;\r\n\tdisplay: inline-block;\r\n\t// clear: both;\r\n\tmargin-bottom: 16rpx;\r\n\tpadding: 20rpx;\r\n\t// vertical-align: top;\r\n\tborder-radius: 10rpx;\r\n\t// width: 260px;\r\n}\r\n\r\n.chat_wrapper .bubble.me {\r\n\t// float: right;\r\n\tmargin-right: 28rpx;\r\n\t// margin-left: 20rpx;\r\n\tcolor: #fff;\r\n\tbackground-color: #e6b873;\r\n\tword-wrap: break-word;\r\n\tword-break: break-all;\r\n}\r\n\r\n.chat_wrapper .bubble.you {\r\n\t// float: left;\r\n\t// margin-right: 20rpx;\r\n\tmargin-left: 28rpx;\r\n\tcolor: #181818;\r\n\tbackground-color: #fff;\r\n\tword-wrap: break-word;\r\n\tword-break: break-all;\r\n}\r\n\r\n.chat_wrapper .bubble:before {\r\n\tposition: absolute;\r\n\ttop: 38rpx;\r\n\tdisplay: block;\r\n\twidth: 16rpx;\r\n\theight: 12rpx;\r\n\tcontent: '\\00a0';\r\n\t-webkit-transform: rotate(29deg) skew(-35deg);\r\n\ttransform: rotate(29deg) skew(-35deg);\r\n}\r\n\r\n.chat_wrapper .bubble.you:before {\r\n\tleft: -6rpx;\r\n\tbackground-color: #fff;\r\n}\r\n\r\n.chat_wrapper .bubble.me:before {\r\n\tright: -6rpx;\r\n\tbackground-color: #e6b873;\r\n}\r\n\r\n.chat_wrapper .bubble image {\r\n\t// max-height: 400rpx !important;\r\n\tdisplay: block;\r\n\twidth: 200rpx;\r\n\tvertical-align: bottom;\r\n}\r\n\r\n.chat_wrapper .bubble .emoji {\r\n\tdisplay: inline-block;\r\n\twidth: 120rpx;\r\n\tmin-height: 50rpx;\r\n}\r\n\r\n// 消息输入\r\n.content_wrapper .write {\r\n\tbox-sizing: border-box;\r\n\tbackground-color: #f2f2f2;\r\n\tbox-shadow: 0 -2rpx 0 #e5e5e5;\r\n\twidth: 100%;\r\n\tpadding: 20rpx;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tposition: fixed;\r\n\tbottom: 0rpx;\r\n\tz-index: 22;\r\n}\r\n\r\n#wrapper_footer {\r\n\tdisplay: block;\r\n\tclear: both;\r\n\theight: 200rpx;\r\n\twidth: 100%;\r\n}\r\n\r\n.write_right {\r\n\tflex: 2;\r\n\tdisplay: flex;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n}\r\n\r\n.widget_textarea {\r\n\tflex: 7;\r\n\tbackground-color: #ffffff;\r\n\tborder-radius: 20rpx;\r\n\t// overflow-y: auto;\r\n\tdisplay: flex;\r\n\tjustify-content: center;\r\n\talign-items: center;\r\n\t// max-height: 200rpx;\r\n\tpadding: 20rpx;\r\n}\r\n\r\n.content_wrapper .toolbar_icon {\r\n\tdisplay: inline-block;\r\n\tcursor: pointer;\r\n\tvertical-align: middle;\r\n\twidth: 56rpx;\r\n\theight: 56rpx;\r\n\tcontent: '';\r\n\tmargin-left: 16rpx;\r\n}\r\n\r\n.kefu_message {\r\n\twidth: 100%;\r\n\toutline: none;\r\n\tborder: none;\r\n\tresize: none;\r\n\r\n\t-webkit-user-select: text !important;\r\n\t-moz-user-select: text !important;\r\n\t-ms-user-select: text !important;\r\n\tuser-select: text !important;\r\n\tline-height: 36rpx;\r\n\tfont-size: 28rpx;\r\n\tcolor: #333;\r\n}\r\n\r\n.kefu_message::-webkit-scrollbar {\r\n\twidth: 4rpx;\r\n}\r\n\r\n.kefu_message::-webkit-scrollbar-track {\r\n\tbackground-color: #fff;\r\n\t-webkit-border-radius: 2em;\r\n\t-moz-border-radius: 2em;\r\n\tborder-radius: 2em;\r\n}\r\n\r\n.kefu_message::-webkit-scrollbar-thumb {\r\n\tbackground-color: #e6e6e6;\r\n\t-webkit-border-radius: 2em;\r\n\t-moz-border-radius: 2em;\r\n\tborder-radius: 2em;\r\n}\r\n\r\n.footer_div {\r\n\tposition: fixed;\r\n\tbottom: 0rpx;\r\n\tz-index: 22;\r\n\tbackground-color: #fff;\r\n\tbox-shadow: 0 8rpx 10rpx rgba(0, 0, 0, 0.1);\r\n\twidth: 100%;\r\n\tanimation: show_footer_div 0.1s;\r\n\tanimation-fill-mode: forwards;\r\n\tpadding-top: 12rpx;\r\n\tbox-sizing: border-box;\r\n\theight: 170px;\r\n\toverflow-y: auto;\r\n\toverflow-x: hidden;\r\n}\r\n\r\n@keyframes show_footer_div {\r\n\tfrom {\r\n\t\theight: 0;\r\n\t}\r\n\r\n\tto {\r\n\t\theight: 170px;\r\n\t}\r\n}\r\n\r\n.footer_div image {\r\n\theight: 51rpx;\r\n\twidth: 51rpx;\r\n\tpadding: 12rpx;\r\n}\r\n\r\n.send_btn {\r\n\tmargin-left: 28rpx;\r\n\tbackground: #00b0ff;\r\n\tcolor: #fff;\r\n\tborder-color: #00b0ff;\r\n\toutline: none;\r\n\tpadding: 10rpx 20rpx;\r\n\tfont-size: 24rpx;\r\n\tline-height: 1.5;\r\n\tborder-radius: 6rpx;\r\n}\r\n\r\n.send_btn::after {\r\n\tborder: none;\r\n}\r\n\r\n.send_btn_hover {\r\n\tbackground-color: #19baff;\r\n}\r\n\r\n.toolbar {\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n}\r\n\r\n.toolbar_item {\r\n\tmargin-top: 20rpx;\r\n\twidth: 25%;\r\n\tdisplay: flex;\r\n\tflex-wrap: wrap;\r\n\talign-items: center;\r\n\tjustify-content: center;\r\n\t.tool-img {\r\n\t\twidth: 100rpx;\r\n\t\theight: 100rpx;\r\n\t}\r\n}\r\n\r\n.toolbar_item view {\r\n\tdisplay: block;\r\n\twidth: 100%;\r\n\tfont-size: 26rpx;\r\n\tline-height: 34rpx;\r\n\ttext-align: center;\r\n\tcolor: #333;\r\n}\r\n\r\n// 留言板\r\n.leave_message {\r\n\tpadding: 0 20rpx 50rpx;\r\n\tbackground-color: #fff;\r\n\tborder-top: 1rpx solid rgba(#dfdfdf, 0.5);\r\n\tposition: relative;\r\n\t.form-group {\r\n\t\t.label-title {\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tfont-family: PingFang SC;\r\n\t\t\tfont-weight: bold;\r\n\t\t\tcolor: rgba(51, 51, 51, 1);\r\n\t\t\tline-height: 100rpx;\r\n\t\t}\r\n\t\t.form-control {\r\n\t\t\twidth: 660rpx;\r\n\t\t\theight: 84rpx;\r\n\t\t\tbackground: rgba(249, 250, 251, 1);\r\n\t\t\tborder-radius: 20rpx;\r\n\t\t\tpadding: 12rpx 24rpx;\r\n\t\t\tcolor: #555;\r\n\t\t\tfont-size: 26rpx;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.leave_success {\r\n\twidth: 600rpx;\r\n\theight: 74rpx;\r\n\tline-height: 74rpx;\r\n\tmargin: 200rpx auto 0;\r\n\tbackground: linear-gradient(90deg, rgba(233, 180, 97, 1), rgba(238, 204, 137, 1));\r\n\tborder-radius: 37rpx;\r\n\tfont-size: 28rpx;\r\n\tfont-family: PingFang SC;\r\n\tfont-weight: 400;\r\n\tcolor: rgba(255, 255, 255, 1);\r\n}\r\n</style>\r\n","import mod from \"-!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./index.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1632634316902\n      var cssReload = require(\"C:/Users/LH/Downloads/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}