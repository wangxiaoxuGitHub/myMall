{"version":3,"sources":["webpack:///E:/example/myMall/components/shopro-sku/shopro-sku.vue?7ff7","webpack:///E:/example/myMall/components/shopro-sku/shopro-sku.vue?931d","webpack:///E:/example/myMall/components/shopro-sku/shopro-sku.vue?c082","webpack:///E:/example/myMall/components/shopro-sku/shopro-sku.vue?05f7","uni-app:///components/shopro-sku/shopro-sku.vue","webpack:///E:/example/myMall/components/shopro-sku/shopro-sku.vue?c5da","webpack:///E:/example/myMall/components/shopro-sku/shopro-sku.vue?28a3"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAmI;AACnI;AAC8D;AACL;AACsC;;;AAG/F;AAC2L;AAC3L,gBAAgB,kMAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,iGAAM;AACR,EAAE,0GAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,qGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,2OAEN;AACP;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC5CA;AAAA;AAAA;AAAA;AAAktB,CAAgB,6tBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0EtuB,gD;AACA;AACA,gBADA;AAEA,MAFA,kBAEA;AACA;AACA,qBADA;AAEA,iBAFA;AAGA,yBAHA;AAIA,yBAJA;AAKA,iBALA;AAMA,0BANA;AAOA,wBAPA;;AASA,GAZA;AAaA;AACA,iBADA;AAEA,qBAFA;AAGA,aAHA;AAIA;AACA,kBADA;AAEA,oBAFA,EAJA;;AAQA;AACA,kBADA;AAEA,sBAFA,EARA;;AAYA;AACA,kBADA;AAEA,sBAFA,EAZA;;AAgBA;AACA;AACA,kBAFA;AAGA,gBAHA,EAhBA,EAbA;;;AAmCA,SAnCA,qBAmCA;AACA;AACA;AACA,GAtCA;AAuCA,SAvCA,qBAuCA;AACA;AACA;AACA;AACA;AACA;AACA,GA7CA;AA8CA;AACA,QADA,gBACA,MADA,EACA,MADA,EACA;AACA;AACA,KAHA,EA9CA;;AAmDA;AACA,YADA,sBACA;AACA;AACA,KAHA;AAIA;AACA,SADA,iBACA;AACA;AACA,OAHA;AAIA,SAJA,eAIA,GAJA,EAIA;AACA;AACA;AACA;AACA,OARA,EAJA;;AAcA,kBAdA,4BAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAJA;AAKA,SANA;AAOA,OARA;AASA;AACA;AACA,KA7BA,EAnDA;;;AAmFA;AACA,wDADA;AAEA,QAFA,gBAEA,IAFA,EAEA,MAFA,EAEA;AACA;AACA,kBADA;AAEA,qBAFA;;AAIA,KAPA;;AASA;AACA,aAVA,qBAUA,GAVA,EAUA,KAVA,EAUA;AACA;AACA,2BAFA,CAEA;AACA,wBAHA,CAGA;AACA,4BAJA,CAIA;;AAEA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA;;AAEA,2BAfA,CAeA;AACA;AACA;AACA;AACA;AACA;AACA,OALA;;AAOA;AACA;;AAEA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;;AAEA;AACA;AACA,KA7CA;;AA+CA;AACA,kBAhDA,4BAgDA;AACA,wBADA,CACA;;AAEA;AACA;;AAEA;AAHA,mDAIA,aAJA,aAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAZA;AAaA,OAbA,MAaA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,8BAxBA;AAyBA,cAzBA,cAyBA;AACA;AACA;;AAEA;AA7BA,kEA8BA;;AAEA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SATA;AAUA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA;AAMA,OARA,MAQA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA,KAhIA;AAiIA;AACA,qBAlIA,+BAkIA;AACA,wBADA;;AAGA,mBAHA,gDAGA,KAHA;AAIA;AACA;AACA;AACA;AACA,qBARA;;AAUA;AACA;AACA;AACA;AACA;AACA,WALA;;AAOA;AACA;AACA,WAnBA,EAGA,4DAKA,IALA,6CAGA;AAcA,SApBA;;AAsBA;AACA,KAzJA;;AA2JA;AACA,aA5JA,qBA4JA,CA5JA,EA4JA;AACA;AACA,KA9JA;AA+JA;AACA,QAhKA,gBAgKA,CAhKA,EAgKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA9KA;;AAgLA;AACA,eAjLA,yBAiLA;AACA;AACA;AACA;AACA,uCADA;AAEA,uBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA,SALA;AAMA;AACA,KA/LA;AAgMA;AACA,cAjMA,wBAiMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCADA;AAEA,uBAFA;AAGA,mCAHA;AAIA,6CAJA;AAKA,mCALA;;AAOA;AACA,KA/MA;AAgNA;AACA,WAjNA,qBAiNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAPA;;AASA;AACA,KA7NA;AA8NA;AACA,cA/NA,wBA+NA;AACA;AACA;AACA;AACA;AACA;AACA,OAJA,MAIA;AACA;AACA;AACA,iDADA;AAEA,mDAFA;AAGA,+CAHA;AAIA,iDAJA;;AAMA;AACA;AACA;AACA,SAHA,MAGA;AACA;AACA;AACA;AACA;AACA,KArPA,GAnFA,E;;;;;;;;;;;;;AC3EA;AAAA;AAAA;AAAA;AAAo0C,CAAgB,mxCAAG,EAAC,C;;;;;;;;;;;ACAx1C;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/shopro-sku/shopro-sku.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./shopro-sku.vue?vue&type=template&id=edf15838&scoped=true&\"\nvar renderjs\nimport script from \"./shopro-sku.vue?vue&type=script&lang=js&\"\nexport * from \"./shopro-sku.vue?vue&type=script&lang=js&\"\nimport style0 from \"./shopro-sku.vue?vue&type=style&index=0&id=edf15838&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"edf15838\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/shopro-sku/shopro-sku.vue\"\nexport default component.exports","export * from \"-!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shopro-sku.vue?vue&type=template&id=edf15838&scoped=true&\"","var components\ntry {\n  components = {\n    uNumberBox: function() {\n      return import(\n        /* webpackChunkName: \"uview-ui/components/u-number-box/u-number-box\" */ \"@/uview-ui/components/u-number-box/u-number-box.vue\"\n      )\n    }\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      $event.stopPropagation()\n      _vm.showModal = false\n    }\n\n    _vm.e1 = function($event) {\n      $event.stopPropagation()\n      _vm.showModal = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shopro-sku.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shopro-sku.vue?vue&type=script&lang=js&\"","<template>\r\n\t<!-- 规格 -->\r\n\t<view class=\"cu-modal bottom-modal\" @touchmove.stop.prevent=\"\" :class=\"{ show: showModal }\" @tap.stop=\"showModal = false\" v-if=\"goodsInfo.sku_price\">\r\n\t\t<view class=\"cu-dialog\" @tap.stop style=\"border-radius: 30rpx 30rpx 0 0;\">\r\n\t\t\t<view class=\"shop-modal page_box\" :style=\"goodsInfo.is_sku == 0 ? 'height:700rpx' : ''\">\r\n\t\t\t\t<text class=\"u-iconfont uicon-close-circle-fill close-icon\" @tap.stop=\"showModal = false\"></text>\r\n\t\t\t\t<!-- 商品卡片-->\r\n\t\t\t\t<view class=\"top u-flex modal-head__box\">\r\n\t\t\t\t\t<image class=\"shop-img\" :src=\"currentSkuPrice.image ? currentSkuPrice.image : goodsInfo.image\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t<view class=\" goods-box u-flex-col u-row-between\">\r\n\t\t\t\t\t\t<view class=\"goods-title u-ellipsis-2\">{{ goodsInfo.title }}</view>\r\n\t\t\t\t\t\t<view class=\"u-flex u-row-between goods-bottom\">\r\n\t\t\t\t\t\t\t<view class=\"price-box u-flex\">\r\n\t\t\t\t\t\t\t\t<view v-if=\"goodsType === 'score'\">{{ currentSkuPrice.price_text || goodsInfo.price }}</view>\r\n\t\t\t\t\t\t\t\t<view v-else-if=\"grouponBuyType === 'groupon'\">\r\n\t\t\t\t\t\t\t\t\t￥{{ currentSkuPrice.groupon_price || (goodsInfo.activity_type === 'groupon' ? goodsInfo.groupon_price : goodsInfo.price) }}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view v-else>￥{{ currentSkuPrice.price || goodsInfo.price }}</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<text class=\"stock\">库存{{ currentSkuPrice.stock || goodsInfo.stock }}件</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 规格选项 -->\r\n\t\t\t\t<scroll-view scroll-y class=\"content_box\">\r\n\t\t\t\t\t<view class=\"select-box u-flex-col u-row-left\" v-for=\"(s, x) in skuList\" :key=\"s.id\">\r\n\t\t\t\t\t\t<view class=\"type-title u-flex\">{{ s.name }}</view>\r\n\t\t\t\t\t\t<view class=\"tag-box u-flex u-flex-wrap\">\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclass=\"tag u-reset-button\"\r\n\t\t\t\t\t\t\t\tv-for=\"(sc, y) in s.content\"\r\n\t\t\t\t\t\t\t\t:key=\"sc.id\"\r\n\t\t\t\t\t\t\t\t:class=\"{ 'tag-active': currentSkuArray[sc.pid] == sc.id, 'tag-disabled': sc.disabled == true }\"\r\n\t\t\t\t\t\t\t\t:disabled=\"sc.disabled == true\"\r\n\t\t\t\t\t\t\t\t@tap=\"chooseSku(sc.pid, sc.id)\"\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{{ sc.name }}\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<!-- 计步器 -->\r\n\t\t\t\t\t<view class=\"buy-num-box u-flex u-row-between\">\r\n\t\t\t\t\t\t<view class=\"num-title\">购买数量</view>\r\n\t\t\t\t\t\t<u-number-box v-model=\"goodsNum\" :min=\"1\" :step=\"1\" :max=\"maxStep\" disabled-input @plus=\"plus\" @change=\"changeNum\"></u-number-box>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</scroll-view>\r\n\r\n\t\t\t\t<!-- 功能按钮 -->\r\n\t\t\t\t<view class=\"btn-box foot_box u-flex u-row-between\" v-if=\"buyType === 'cart' || buyType === 'buy'\">\r\n\t\t\t\t\t<button class=\"u-reset-button cu-btn save-btn\" v-if=\"(activityRules && activityRules.status === 'ing') || !goodsInfo.activity_type\" @tap=\"confirm\">确认</button>\r\n\t\t\t\t\t<button class=\"u-reset-button cu-btn cancel-btn\" v-if=\"activityRules && activityRules.status !== 'ing' && goodsInfo.activity_type\" @tap=\"confirm\">确定</button>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"btn-box foot_box u-flex u-row-between\" v-else>\r\n\t\t\t\t\t<button class=\"u-reset-button cu-btn  cart-btn\" @tap=\"confirmCart\">加入购物车</button>\r\n\t\t\t\t\t<button class=\"u-reset-button cu-btn  buy-btn\" @tap=\"confirmBuy\">立即购买</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n/**\r\n * 多规格组件\r\n * @property {Object} goodsInfo - 商品数据\r\n * @property {Boolean} value = showModal - 显隐\r\n * @property {String} buyType  - 购买方式\r\n * @property {String} goodsType - 商品类别\r\n * @property {String} grouponBuyType -拼团商品购买方式\r\n * @property {Number} grouponId - 拼团ID,分享进入\r\n * @property {Object} activityRules - 活动状态。\r\n */\r\nimport { mapMutations, mapActions, mapState } from 'vuex';\r\nexport default {\r\n\tcomponents: {},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tmaxStep: 999999,\r\n\t\t\tskuList: [],\r\n\t\t\tcurrentSkuPrice: {},\r\n\t\t\tcurrentSkuArray: [],\r\n\t\t\tgoodsNum: 1,\r\n\t\t\tconfirmGoodsInfo: {},\r\n\t\t\ttype: this.buyType\r\n\t\t};\r\n\t},\r\n\tprops: {\r\n\t\tgoodsInfo: {},\r\n\t\tactivityRules: {},\r\n\t\tvalue: {},\r\n\t\tbuyType: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'sku'\r\n\t\t},\r\n\t\tgoodsType: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'goods'\r\n\t\t},\r\n\t\tgrouponBuyType: {\r\n\t\t\ttype: String,\r\n\t\t\tdefault: 'alone'\r\n\t\t},\r\n\t\tgrouponId: {\r\n\t\t\t//参加拼团的时候，传入当前团id;\r\n\t\t\ttype: Number,\r\n\t\t\tdefault: 0\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\tthis.skuList = this.goodsInfo.sku;\r\n\t\tthis.changeDisabled(false);\r\n\t},\r\n\tmounted() {\r\n\t\t// 单规格选项\r\n\t\tif (!this.goodsInfo.is_sku) {\r\n\t\t\tthis.currentSkuPrice = this.skuPrice[0];\r\n\t\t\tthis.maxStep = this.skuPrice[0].stock;\r\n\t\t}\r\n\t},\r\n\twatch: {\r\n\t\ttype(nweVal, oldVal) {\r\n\t\t\treturn newVal;\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\tskuPrice() {\r\n\t\t\treturn this.goodsInfo.sku_price;\r\n\t\t},\r\n\t\tshowModal: {\r\n\t\t\tget() {\r\n\t\t\t\treturn this.value;\r\n\t\t\t},\r\n\t\t\tset(val) {\r\n\t\t\t\tval ? uni.hideTabBar() : uni.showTabBar();\r\n\t\t\t\tthis.$emit('input', val);\r\n\t\t\t\treturn val;\r\n\t\t\t}\r\n\t\t},\r\n\t\tcurrentSkuText() {\r\n\t\t\tlet that = this;\r\n\t\t\tlet str = '';\r\n\t\t\tlet currentSkuArray = this.currentSkuArray;\r\n\t\t\tcurrentSkuArray.forEach(v => {\r\n\t\t\t\tthat.skuList.forEach(s => {\r\n\t\t\t\t\ts.content.forEach(u => {\r\n\t\t\t\t\t\tif (u.id === v) {\r\n\t\t\t\t\t\t\tstr += ' ' + u.name;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\tthat.$emit('getSkuText', str);\r\n\t\t\treturn str;\r\n\t\t}\r\n\t},\r\n\r\n\tmethods: {\r\n\t\t...mapActions(['addCartGoods', 'getCartList']),\r\n\t\tjump(path, parmas) {\r\n\t\t\tthis.$Router.push({\r\n\t\t\t\tpath: path,\r\n\t\t\t\tquery: parmas\r\n\t\t\t});\r\n\t\t},\r\n\r\n\t\t// 选择规格\r\n\t\tchooseSku(pid, skuId) {\r\n\t\t\tlet that = this;\r\n\t\t\tlet isChecked = true; // 选中 or 取消选中\r\n\t\t\tthis.goodsNum = 1; //选择规格时，数量重置为1.\r\n\t\t\tthis.maxStep = 999999; //选择其他规格时，取消上个规格库存限制\r\n\r\n\t\t\tif (that.currentSkuArray[pid] != undefined && that.currentSkuArray[pid] == skuId) {\r\n\t\t\t\t// 点击已被选中的，删除并填充 ''\r\n\t\t\t\tisChecked = false;\r\n\t\t\t\tthat.currentSkuArray.splice(pid, 1, '');\r\n\t\t\t} else {\r\n\t\t\t\t// 选中\r\n\t\t\t\tthat.$set(that.currentSkuArray, pid, skuId);\r\n\t\t\t}\r\n\r\n\t\t\tlet chooseSkuId = []; // 选中的规格大类\r\n\t\t\tthat.currentSkuArray.forEach(sku => {\r\n\t\t\t\tif (sku != '') {\r\n\t\t\t\t\t// sku 为空是反选 填充的\r\n\t\t\t\t\tchooseSkuId.push(sku);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\t// 当前所选规格下，所有可以选择的 skuPric\r\n\t\t\tlet newPrice = this.getCanUseSkuPrice();\r\n\r\n\t\t\t// 判断所有规格大类是否选择完成\r\n\t\t\tif (chooseSkuId.length == that.skuList.length && newPrice.length) {\r\n\t\t\t\tthat.currentSkuPrice = newPrice[0];\r\n\t\t\t} else {\r\n\t\t\t\tthat.currentSkuPrice = {};\r\n\t\t\t}\r\n\r\n\t\t\t// 改变规格项禁用状态\r\n\t\t\tthis.changeDisabled(isChecked, pid, skuId);\r\n\t\t},\r\n\r\n\t\t// 改变禁用状态\r\n\t\tchangeDisabled(isChecked = false, pid = 0, skuId = 0) {\r\n\t\t\tlet newPrice = []; // 所有可以选择的 skuPrice\r\n\r\n\t\t\tif (isChecked) {\r\n\t\t\t\t// 选中规格\r\n\r\n\t\t\t\t// 当前点击选中规格下的 所有可用 skuPrice\r\n\t\t\t\tfor (let price of this.skuPrice) {\r\n\t\t\t\t\tif (price.stock <= 0) {\r\n\t\t\t\t\t\t// this.goodsNum 不判断是否大于当前选择数量，在 uni-number-box 判断，并且 取 stock 和 goods_num 的小值\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (price.goods_sku_id_arr.indexOf(skuId.toString()) >= 0) {\r\n\t\t\t\t\t\tnewPrice.push(price);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\t// 取消选择规格\r\n\r\n\t\t\t\t// 当前所选规格下，所有可以选择的 skuPric\r\n\t\t\t\tnewPrice = this.getCanUseSkuPrice();\r\n\t\t\t}\r\n\r\n\t\t\t// 所有存在并且有库存未选择的规格项 的 子项 id\r\n\t\t\tlet noChooseSkuIds = [];\r\n\t\t\tfor (let price of newPrice) {\r\n\t\t\t\tnoChooseSkuIds = noChooseSkuIds.concat(price.goods_sku_id_arr);\r\n\t\t\t}\r\n\r\n\t\t\t// 去重\r\n\t\t\tnoChooseSkuIds = Array.from(new Set(noChooseSkuIds));\r\n\r\n\t\t\tif (isChecked) {\r\n\t\t\t\t// 去除当前选中的规格项\r\n\t\t\t\tlet index = noChooseSkuIds.indexOf(skuId.toString());\r\n\t\t\t\tnoChooseSkuIds.splice(index, 1);\r\n\t\t\t} else {\r\n\t\t\t\t// 循环去除当前已选择的规格项\r\n\t\t\t\tthis.currentSkuArray.forEach(sku => {\r\n\t\t\t\t\tif (sku.toString() != '') {\r\n\t\t\t\t\t\t// sku 为空是反选 填充的\r\n\t\t\t\t\t\tlet index = noChooseSkuIds.indexOf(sku.toString());\r\n\t\t\t\t\t\tif (index >= 0) {\r\n\t\t\t\t\t\t\t// sku 存在于 noChooseSkuIds\r\n\t\t\t\t\t\t\tnoChooseSkuIds.splice(index, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t// 当前已选择的规格大类\r\n\t\t\tlet chooseSkuKey = [];\r\n\t\t\tif (!isChecked) {\r\n\t\t\t\t// 当前已选择的规格大类\r\n\t\t\t\tthis.currentSkuArray.forEach((sku, key) => {\r\n\t\t\t\t\tif (sku != '') {\r\n\t\t\t\t\t\t// sku 为空是反选 填充的\r\n\t\t\t\t\t\tchooseSkuKey.push(key);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\t// 当前点击选择的规格大类\r\n\t\t\t\tchooseSkuKey = [pid];\r\n\t\t\t}\r\n\r\n\t\t\tfor (let i in this.skuList) {\r\n\t\t\t\t// 当前点击的规格，或者取消选择时候 已选中的规格 不进行处理\r\n\t\t\t\tif (chooseSkuKey.indexOf(this.skuList[i]['id']) >= 0) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tfor (let j in this.skuList[i]['content']) {\r\n\t\t\t\t\t// 如果当前规格项 id 不存在于有库存的规格项中，则禁用\r\n\t\t\t\t\tif (noChooseSkuIds.indexOf(this.skuList[i]['content'][j]['id'].toString()) >= 0) {\r\n\t\t\t\t\t\tthis.skuList[i]['content'][j]['disabled'] = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.skuList[i]['content'][j]['disabled'] = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 当前所选规格下，获取所有有库存的 skuPrice\r\n\t\tgetCanUseSkuPrice() {\r\n\t\t\tlet newPrice = [];\r\n\r\n\t\t\tfor (let price of this.skuPrice) {\r\n\t\t\t\tif (price.stock <= 0) {\r\n\t\t\t\t\t// || price.stock < this.goodsNum\t\t不判断是否大于当前选择数量，在 uni-number-box 判断，并且 取 stock 和 goods_num 的小值\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\tvar isOk = true;\r\n\r\n\t\t\t\tthis.currentSkuArray.forEach(sku => {\r\n\t\t\t\t\t// sku 不为空，并且，这个 条 skuPrice 没有被选中,则排除\r\n\t\t\t\t\tif (sku.toString() != '' && price.goods_sku_id_arr.indexOf(sku.toString()) < 0) {\r\n\t\t\t\t\t\tisOk = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (isOk) {\r\n\t\t\t\t\tnewPrice.push(price);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn newPrice;\r\n\t\t},\r\n\r\n\t\t// 数量\r\n\t\tchangeNum(e) {\r\n\t\t\tthis.changeDisabled(false);\r\n\t\t},\r\n\t\t// 增加\r\n\t\tplus(e) {\r\n\t\t\tif (e.value >= this.currentSkuPrice.stock) {\r\n\t\t\t\tthis.maxStep = this.currentSkuPrice.stock;\r\n\t\t\t\tthis.$u.toast('库存不足');\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif (this.goodsInfo.activity_type === 'seckill' || this.goodsInfo.activity_type === 'groupon') {\r\n\t\t\t\tlet rules = this.goodsInfo.activity.rules;\r\n\t\t\t\tif (rules.limit_buy != 0 && e.value >= rules.limit_buy) {\r\n\t\t\t\t\tthis.maxStep = rules.limit_buy;\r\n\t\t\t\t\tthis.$u.toast('本次活动最多购买' + rules.limit_buy + '件');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// 加入购物车确定\r\n\t\tconfirmCart() {\r\n\t\t\tlet that = this;\r\n\t\t\tif (this.confirmSku()) {\r\n\t\t\t\tlet confirmGoodsList = {\r\n\t\t\t\t\tlist: [that.confirmGoodsInfo],\r\n\t\t\t\t\tfrom: 'goods'\r\n\t\t\t\t};\r\n\t\t\t\tthat.addCartGoods(confirmGoodsList).then(res => {\r\n\t\t\t\t\tif (res.code === 1) {\r\n\t\t\t\t\t\tthat.showModal = false;\r\n\t\t\t\t\t\tthat.$u.toast(res.msg);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 立即购买\r\n\t\tconfirmBuy() {\r\n\t\t\tlet that = this;\r\n\t\t\tthat.showModal = false;\r\n\t\t\tif (this.confirmSku()) {\r\n\t\t\t\tlet confirmGoodsList = [];\r\n\t\t\t\tconfirmGoodsList.push(that.confirmGoodsInfo);\r\n\t\t\t\tthat.jump('/pages/order/confirm', {\r\n\t\t\t\t\tgoodsList: confirmGoodsList,\r\n\t\t\t\t\tfrom: 'goods',\r\n\t\t\t\t\torderType: that.goodsType,\r\n\t\t\t\t\tgrouponBuyType: that.grouponBuyType,\r\n\t\t\t\t\tgrouponId: that.grouponId\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 确定\r\n\t\tconfirm() {\r\n\t\t\tif (this.confirmSku()) {\r\n\t\t\t\tswitch (this.buyType) {\r\n\t\t\t\t\tcase 'cart':\r\n\t\t\t\t\t\tthis.confirmCart();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'buy':\r\n\t\t\t\t\t\tthis.confirmBuy();\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\t// 确定规格\r\n\t\tconfirmSku() {\r\n\t\t\tlet that = this;\r\n\t\t\tif (that.currentSkuPrice.stock == 0 || that.currentSkuPrice.stock < that.goodsNum) {\r\n\t\t\t\tthat.$u.toast('库存不足');\r\n\t\t\t\tthat.showModal = false;\r\n\t\t\t\treturn false;\r\n\t\t\t} else {\r\n\t\t\t\tthat.currentSkuPrice.goods_num = that.goodsNum;\r\n\t\t\t\tthat.confirmGoodsInfo = {\r\n\t\t\t\t\tgoods_id: that.currentSkuPrice.goods_id,\r\n\t\t\t\t\tgoods_num: that.currentSkuPrice.goods_num,\r\n\t\t\t\t\tsku_price_id: that.currentSkuPrice.id,\r\n\t\t\t\t\tgoods_price: that.currentSkuPrice.price\r\n\t\t\t\t};\r\n\t\t\t\tif (!that.confirmGoodsInfo.sku_price_id) {\r\n\t\t\t\t\tthat.$u.toast('请选择规格');\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthat.showModal = false;\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.size-box {\r\n\tline-height: 82rpx;\r\n\tbackground: #fff;\r\n\tpadding: 0 20rpx;\r\n\tmargin: 20rpx 0;\r\n\tfont-size: 28rpx;\r\n\r\n\t.title {\r\n\t\tcolor: #999;\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n}\r\n\r\n// 规格\r\n.shop-modal {\r\n\twidth: 750rpx;\r\n\theight: 950rpx;\r\n\tbackground: rgba(255, 255, 255, 1);\r\n\tpadding: 20rpx 20rpx 30rpx;\r\n\tposition: relative;\r\n\t.close-icon {\r\n\t\tfont-size: 34rpx;\r\n\t\tcolor: #e0e0e0;\r\n\t\tposition: absolute;\r\n\t\ttop: 20rpx;\r\n\t\tright: 20rpx;\r\n\t}\r\n\t// 商品卡片\r\n\t.top {\r\n\t\tmargin: 30rpx 0;\r\n\t\tborder-radius: 20rpx;\r\n\t\tpadding: 20rpx;\r\n\r\n\t\t.shop-img {\r\n\t\t\twidth: 160upx;\r\n\t\t\theight: 160upx;\r\n\t\t\tborder-radius: 6upx;\r\n\t\t\tmargin-right: 30upx;\r\n\t\t\tbackground: #ccc;\r\n\t\t}\r\n\r\n\t\t.goods-box {\r\n\t\t\theight: 160upx;\r\n\t\t\twidth: 490rpx;\r\n\t\t\talign-items: flex-start;\r\n\r\n\t\t\t.goods-title {\r\n\t\t\t\tfont-size: 28rpx;\r\n\r\n\t\t\t\tfont-weight: 500;\r\n\t\t\t\tcolor: rgba(51, 51, 51, 1);\r\n\t\t\t\tline-height: 42rpx;\r\n\t\t\t\ttext-align: left;\r\n\t\t\t}\r\n\r\n\t\t\t.goods-bottom {\r\n\t\t\t\twidth: 100%;\r\n\t\t\t}\r\n\r\n\t\t\t.price-box {\r\n\t\t\t\tfont-size: 36upx;\r\n\r\n\t\t\t\tfont-weight: bold;\r\n\t\t\t\tcolor: #e1212b;\r\n\r\n\t\t\t\t.unit {\r\n\t\t\t\t\tfont-size: 24upx;\r\n\r\n\t\t\t\t\tfont-weight: bold;\r\n\t\t\t\t\tcolor: #e1212b;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t.stock {\r\n\t\t\t\tfont-size: 26rpx;\r\n\t\t\t\tcolor: #999;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// 规格选项\r\n\t.select-box {\r\n\t\tmargin-bottom: 30rpx;\r\n\t\t.type-title {\r\n\t\t\tfont-size: 26upx;\r\n\t\t\tfont-weight: 400;\r\n\t\t\tmargin-bottom: 20upx;\r\n\t\t}\r\n\t\t.tag-box {\r\n\t\t\tflex-wrap: wrap;\r\n\t\t}\r\n\t\t.tag {\r\n\t\t\tline-height: 62rpx;\r\n\t\t\tbackground: #f4f4f4;\r\n\t\t\tborder-radius: 31rpx;\r\n\t\t\tfont-size: 28upx;\r\n\t\t\tfont-weight: 400;\r\n\t\t\tcolor: #666666;\r\n\t\t\tpadding: 0 30upx;\r\n\t\t\tmargin-bottom: 20rpx;\r\n\t\t\tmargin-right: 10rpx;\r\n\t\t}\r\n\r\n\t\t.tag-active {\r\n\t\t\tbackground: linear-gradient(90deg, #e9b461, #eecc89);\r\n\t\t\tfont-size: 28rpx;\r\n\t\t\tfont-weight: 400;\r\n\t\t\tcolor: #ffffff;\r\n\t\t}\r\n\r\n\t\t.tag-disabled {\r\n\t\t\tbackground: #f8f8f8;\r\n\t\t\tcolor: #cacaca;\r\n\t\t}\r\n\t}\r\n\r\n\t.buy-num-box {\r\n\t\t.num-title {\r\n\t\t\tfont-size: 26upx;\r\n\r\n\t\t\tfont-weight: 400;\r\n\t\t\tmargin-bottom: 20upx;\r\n\t\t}\r\n\t}\r\n}\r\n\r\n.btn-box {\r\n\theight: 100rpx;\r\n\r\n\t.cu-btn {\r\n\t\twidth: 340rpx;\r\n\t\tline-height: 70rpx;\r\n\t\tborder-radius: 35rpx;\r\n\t\tfont-size: 28rpx;\r\n\r\n\t\tfont-weight: 500;\r\n\t\tcolor: rgba(255, 255, 255, 0.9);\r\n\t\tpadding: 0;\r\n\t}\r\n\r\n\t.cart-btn {\r\n\t\tbackground: linear-gradient(90deg, rgba(103, 104, 105, 1), rgba(82, 82, 82, 1));\r\n\t\tbox-shadow: 0px 2rpx 5rpx 0px rgba(102, 103, 104, 0.46);\r\n\t}\r\n\r\n\t.buy-btn {\r\n\t\tbackground: linear-gradient(90deg, rgba(233, 180, 97, 1), rgba(238, 204, 137, 1));\r\n\t}\r\n\t.save-btn {\r\n\t\twidth: 710rpx;\r\n\t\theight: 70rpx;\r\n\t\tbackground: linear-gradient(90deg, rgba(233, 180, 97, 1), rgba(238, 204, 137, 1));\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: rgba(255, 255, 255, 1);\r\n\t\tborder-radius: 35rpx;\r\n\t\tpadding: 0;\r\n\t}\r\n\t.cancel-btn {\r\n\t\twidth: 710rpx;\r\n\t\theight: 70rpx;\r\n\t\tbackground: rgba(221, 221, 221, 1);\r\n\t\tfont-size: 28rpx;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #999999;\r\n\t\tborder-radius: 35rpx;\r\n\t\tpadding: 0;\r\n\t}\r\n}\r\n</style>\r\n","import mod from \"-!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shopro-sku.vue?vue&type=style&index=0&id=edf15838&lang=scss&scoped=true&\"; export default mod; export * from \"-!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!C:\\\\Users\\\\LH\\\\Downloads\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./shopro-sku.vue?vue&type=style&index=0&id=edf15838&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1632634315484\n      var cssReload = require(\"C:/Users/LH/Downloads/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}